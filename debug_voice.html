<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Voice Recognition Debug</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            max-width: 600px;
            margin: 50px auto;
            padding: 20px;
        }
        button {
            padding: 10px 20px;
            margin: 10px;
            font-size: 16px;
        }
        #output {
            margin-top: 20px;
            padding: 10px;
            border: 1px solid #ccc;
            min-height: 100px;
            background: #f9f9f9;
        }
        .status {
            color: #666;
            font-style: italic;
        }
    </style>
</head>
<body>
    <h1>Voice Recognition Debug</h1>
    <button id="startBtn">Start Listening</button>
    <button id="stopBtn">Stop Listening</button>
    <div id="status" class="status">Ready</div>
    <div id="output"></div>

    <script>
        const startBtn = document.getElementById('startBtn');
        const stopBtn = document.getElementById('stopBtn');
        const status = document.getElementById('status');
        const output = document.getElementById('output');

        let recognition = null;

        // Initialize speech recognition
        function initSpeechRecognition() {
            const SpeechRecognition = window.SpeechRecognition || window.webkitSpeechRecognition;
            if (SpeechRecognition) {
                recognition = new SpeechRecognition();
                recognition.continuous = false;
                recognition.interimResults = false;
                recognition.lang = 'en-US';
                
                recognition.onstart = () => {
                    status.textContent = 'Listening...';
                    console.log('Speech recognition started');
                };
                
                recognition.onend = () => {
                    status.textContent = 'Stopped listening';
                    console.log('Speech recognition ended');
                };
                
                recognition.onerror = (event) => {
                    console.error('Speech recognition error:', event.error);
                    status.textContent = `Error: ${event.error}`;
                };
                
                recognition.onresult = (event) => {
                    console.log('Speech recognition result:', event);
                    console.log('Results length:', event.results.length);
                    
                    if (event.results.length > 0) {
                        const result = event.results[0];
                        const transcript = result.transcript;
                        console.log('Transcript:', transcript);
                        
                        const div = document.createElement('div');
                        div.textContent = `"${transcript}"`;
                        output.appendChild(div);
                        
                        status.textContent = 'Got result!';
                    } else {
                        console.log('No transcript found in results');
                        status.textContent = 'No transcript found';
                    }
                };
                
                return true;
            } else {
                status.textContent = 'Speech recognition not supported';
                return false;
            }
        }

        startBtn.addEventListener('click', () => {
            if (!recognition) {
                if (!initSpeechRecognition()) {
                    return;
                }
            }
            try {
                recognition.start();
            } catch (error) {
                console.error('Error starting recognition:', error);
                status.textContent = `Error starting: ${error.message}`;
            }
        });

        stopBtn.addEventListener('click', () => {
            if (recognition) {
                recognition.stop();
            }
        });

        // Initialize on load
        initSpeechRecognition();
    </script>
</body>
</html> 