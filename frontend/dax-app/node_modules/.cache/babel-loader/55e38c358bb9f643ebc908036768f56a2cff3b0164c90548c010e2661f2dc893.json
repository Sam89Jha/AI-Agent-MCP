{"ast":null,"code":"var _jsxFileName = \"/Users/sameer.jha/Python_Projects/NavieTakieSimulation/frontend/dax-app/src/App.tsx\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect, useRef } from 'react';\nimport styled from 'styled-components';\nimport { motion, AnimatePresence } from 'framer-motion';\nimport { FaMicrophone, FaMicrophoneSlash, FaPaperPlane, FaPhone, FaUser, FaCar } from 'react-icons/fa';\nimport axios from 'axios';\n\n// Types\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\n// Styled Components\nconst AppContainer = styled.div`\n  min-height: 100vh;\n  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);\n  display: flex;\n  flex-direction: column;\n`;\n_c = AppContainer;\nconst Header = styled.header`\n  background: rgba(255, 255, 255, 0.1);\n  backdrop-filter: blur(10px);\n  padding: 1rem;\n  text-align: center;\n  color: white;\n  box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);\n`;\n_c2 = Header;\nconst Title = styled.h1`\n  margin: 0;\n  font-size: 1.5rem;\n  font-weight: 600;\n`;\n_c3 = Title;\nconst Subtitle = styled.p`\n  margin: 0.5rem 0 0 0;\n  font-size: 0.9rem;\n  opacity: 0.8;\n`;\n_c4 = Subtitle;\nconst MainContent = styled.main`\n  flex: 1;\n  display: flex;\n  flex-direction: column;\n  max-width: 600px;\n  margin: 0 auto;\n  width: 100%;\n  padding: 1rem;\n`;\n_c5 = MainContent;\nconst BookingCodeInput = styled.div`\n  background: rgba(255, 255, 255, 0.1);\n  backdrop-filter: blur(10px);\n  border-radius: 15px;\n  padding: 1rem;\n  margin-bottom: 1rem;\n  display: flex;\n  gap: 0.5rem;\n  align-items: center;\n`;\n_c6 = BookingCodeInput;\nconst Input = styled.input`\n  flex: 1;\n  padding: 0.75rem;\n  border: none;\n  border-radius: 10px;\n  background: rgba(255, 255, 255, 0.9);\n  font-size: 1rem;\n  outline: none;\n  \n  &:focus {\n    box-shadow: 0 0 0 2px rgba(255, 255, 255, 0.3);\n  }\n`;\n_c7 = Input;\nconst ChatContainer = styled.div`\n  flex: 1;\n  background: rgba(255, 255, 255, 0.1);\n  backdrop-filter: blur(10px);\n  border-radius: 15px;\n  padding: 1rem;\n  margin-bottom: 1rem;\n  overflow-y: auto;\n  max-height: 60vh;\n  display: flex;\n  flex-direction: column;\n  gap: 0.5rem;\n`;\n_c8 = ChatContainer;\nconst MessageBubble = styled(motion.div)`\n  display: flex;\n  align-items: flex-start;\n  gap: 0.5rem;\n  justify-content: ${props => props.$isOwn ? 'flex-end' : 'flex-start'};\n`;\n_c9 = MessageBubble;\nconst MessageContent = styled.div`\n  background: ${props => props.$isOwn ? 'rgba(255, 255, 255, 0.9)' : 'rgba(255, 255, 255, 0.2)'};\n  color: ${props => props.$isOwn ? '#333' : 'white'};\n  padding: 0.75rem 1rem;\n  border-radius: 18px;\n  max-width: 70%;\n  word-wrap: break-word;\n  position: relative;\n  \n  ${props => props.$isOwn ? `\n    border-bottom-right-radius: 5px;\n  ` : `\n    border-bottom-left-radius: 5px;\n  `}\n`;\n_c0 = MessageContent;\nconst MessageTime = styled.div`\n  font-size: 0.7rem;\n  opacity: 0.7;\n  margin-top: 0.25rem;\n`;\n_c1 = MessageTime;\nconst Avatar = styled.div`\n  width: 32px;\n  height: 32px;\n  border-radius: 50%;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  background: ${props => {\n  switch (props.$type) {\n    case 'driver':\n      return 'rgba(255, 255, 255, 0.9)';\n    case 'passenger':\n      return 'rgba(255, 255, 255, 0.7)';\n    case 'ai':\n      return 'rgba(255, 255, 255, 0.8)';\n    default:\n      return 'rgba(255, 255, 255, 0.5)';\n  }\n}};\n  color: #333;\n  font-size: 0.8rem;\n  font-weight: bold;\n`;\n_c10 = Avatar;\nconst InputContainer = styled.div`\n  display: flex;\n  gap: 0.5rem;\n  align-items: center;\n  background: rgba(255, 255, 255, 0.1);\n  backdrop-filter: blur(10px);\n  border-radius: 25px;\n  padding: 0.5rem;\n`;\n_c11 = InputContainer;\nconst TextInput = styled.input`\n  flex: 1;\n  padding: 0.75rem 1rem;\n  border: none;\n  border-radius: 20px;\n  background: rgba(255, 255, 255, 0.9);\n  font-size: 1rem;\n  outline: none;\n  \n  &:focus {\n    box-shadow: 0 0 0 2px rgba(255, 255, 255, 0.3);\n  }\n`;\n_c12 = TextInput;\nconst Button = styled(motion.button)`\n  width: 44px;\n  height: 44px;\n  border: none;\n  border-radius: 50%;\n  background: rgba(255, 255, 255, 0.9);\n  color: #333;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  cursor: pointer;\n  font-size: 1.2rem;\n  transition: all 0.2s ease;\n  \n  &:hover {\n    background: rgba(255, 255, 255, 1);\n    transform: scale(1.05);\n  }\n  \n  &:active {\n    transform: scale(0.95);\n  }\n  \n  &:disabled {\n    opacity: 0.5;\n    cursor: not-allowed;\n  }\n`;\n_c13 = Button;\nconst VoiceButton = styled(Button)`\n  background: ${props => props.$isListening ? 'rgba(255, 100, 100, 0.9)' : 'rgba(255, 255, 255, 0.9)'};\n  color: ${props => props.$isListening ? 'white' : '#333'};\n`;\n_c14 = VoiceButton;\nconst StatusMessage = styled.div`\n  text-align: center;\n  color: white;\n  font-size: 0.9rem;\n  opacity: 0.8;\n  margin: 0.5rem 0;\n`;\n_c15 = StatusMessage;\nconst CallIndicator = styled.div`\n  display: flex;\n  align-items: center;\n  gap: 0.5rem;\n  background: rgba(255, 100, 100, 0.2);\n  padding: 0.5rem 1rem;\n  border-radius: 10px;\n  color: white;\n  font-size: 0.9rem;\n`;\n\n// App Component\n_c16 = CallIndicator;\nconst App = () => {\n  _s();\n  const [bookingCode, setBookingCode] = useState('');\n  const [messages, setMessages] = useState([]);\n  const [inputText, setInputText] = useState('');\n  const [isListening, setIsListening] = useState(false);\n  const [isConnected, setIsConnected] = useState(false);\n  const [recognition, setRecognition] = useState(null);\n  const [statusMessage, setStatusMessage] = useState('');\n  const chatContainerRef = useRef(null);\n  const inputRef = useRef(null);\n\n  // Initialize speech recognition\n  useEffect(() => {\n    const SpeechRecognition = window.SpeechRecognition || window.webkitSpeechRecognition;\n    if (SpeechRecognition) {\n      const recognition = new SpeechRecognition();\n      recognition.continuous = false;\n      recognition.interimResults = false;\n      recognition.lang = 'en-US';\n      recognition.onstart = () => {\n        setIsListening(true);\n        setStatusMessage('Listening...');\n      };\n      recognition.onend = () => {\n        setIsListening(false);\n        setStatusMessage('');\n      };\n      recognition.onerror = event => {\n        console.error('Speech recognition error:', event.error);\n        setIsListening(false);\n        setStatusMessage('Voice recognition error. Please try again.');\n      };\n      recognition.onresult = event => {\n        const transcript = event.results[0].transcript;\n        setInputText(transcript);\n        setStatusMessage('Processing voice input...');\n      };\n      setRecognition(recognition);\n    } else {\n      setStatusMessage('Voice recognition not supported in this browser.');\n    }\n  }, []);\n\n  // Auto-scroll to bottom when new messages arrive\n  useEffect(() => {\n    if (chatContainerRef.current) {\n      chatContainerRef.current.scrollTop = chatContainerRef.current.scrollHeight;\n    }\n  }, [messages]);\n\n  // Connect to booking\n  const connectToBooking = async () => {\n    if (!bookingCode.trim()) {\n      setStatusMessage('Please enter a booking code.');\n      return;\n    }\n    try {\n      setStatusMessage('Connecting to booking...');\n\n      // Test connection by getting messages\n      const response = await axios.get(`/api/v1/get_message/${bookingCode}`);\n      if (response.data.success) {\n        setIsConnected(true);\n        setMessages(response.data.data.messages || []);\n        setStatusMessage('Connected successfully!');\n\n        // Add welcome message\n        const welcomeMessage = {\n          id: Date.now().toString(),\n          text: `Welcome to booking ${bookingCode}! How can I help you today?`,\n          sender: 'ai',\n          timestamp: new Date().toISOString(),\n          type: 'text'\n        };\n        setMessages(prev => [...prev, welcomeMessage]);\n      }\n    } catch (error) {\n      console.error('Connection error:', error);\n      setStatusMessage('Failed to connect. Please check your booking code.');\n    }\n  };\n\n  // Send message\n  const sendMessage = async () => {\n    if (!inputText.trim() || !isConnected) return;\n    const newMessage = {\n      id: Date.now().toString(),\n      text: inputText,\n      sender: 'driver',\n      timestamp: new Date().toISOString(),\n      type: 'text'\n    };\n    setMessages(prev => [...prev, newMessage]);\n    setInputText('');\n    setStatusMessage('Sending message...');\n    try {\n      const response = await axios.post('/api/v1/send_message', {\n        booking_code: bookingCode,\n        message: inputText,\n        sender: 'driver'\n      });\n      if (response.data.success) {\n        setStatusMessage('Message sent successfully!');\n\n        // Add AI response\n        const aiResponse = {\n          id: (Date.now() + 1).toString(),\n          text: 'Message sent successfully. The passenger will be notified.',\n          sender: 'ai',\n          timestamp: new Date().toISOString(),\n          type: 'text'\n        };\n        setMessages(prev => [...prev, aiResponse]);\n      }\n    } catch (error) {\n      console.error('Send message error:', error);\n      setStatusMessage('Failed to send message. Please try again.');\n    }\n  };\n\n  // Make call\n  const makeCall = async () => {\n    if (!isConnected) return;\n    setStatusMessage('Initiating call...');\n    try {\n      const response = await axios.post('/api/v1/make_call', {\n        booking_code: bookingCode,\n        call_type: 'voice',\n        duration: 0\n      });\n      if (response.data.success) {\n        const callMessage = {\n          id: Date.now().toString(),\n          text: 'Call initiated successfully',\n          sender: 'ai',\n          timestamp: new Date().toISOString(),\n          type: 'call',\n          callDetails: {\n            duration: 0,\n            status: 'initiated'\n          }\n        };\n        setMessages(prev => [...prev, callMessage]);\n        setStatusMessage('Call initiated!');\n      }\n    } catch (error) {\n      console.error('Make call error:', error);\n      setStatusMessage('Failed to initiate call. Please try again.');\n    }\n  };\n\n  // Start voice recognition\n  const startListening = () => {\n    if (recognition && !isListening) {\n      recognition.start();\n    }\n  };\n\n  // Handle key press\n  const handleKeyPress = e => {\n    if (e.key === 'Enter' && !e.shiftKey) {\n      e.preventDefault();\n      sendMessage();\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(AppContainer, {\n    children: [/*#__PURE__*/_jsxDEV(Header, {\n      children: [/*#__PURE__*/_jsxDEV(Title, {\n        children: \"DAX - Driver Assistant\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 457,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Subtitle, {\n        children: \"AI-powered chat and voice assistant\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 458,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 456,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(MainContent, {\n      children: [!isConnected ? /*#__PURE__*/_jsxDEV(BookingCodeInput, {\n        children: [/*#__PURE__*/_jsxDEV(Input, {\n          type: \"text\",\n          placeholder: \"Enter booking code...\",\n          value: bookingCode,\n          onChange: e => setBookingCode(e.target.value),\n          onKeyPress: e => e.key === 'Enter' && connectToBooking()\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 464,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(Button, {\n          whileHover: {\n            scale: 1.05\n          },\n          whileTap: {\n            scale: 0.95\n          },\n          onClick: connectToBooking,\n          children: \"Connect\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 471,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 463,\n        columnNumber: 11\n      }, this) : /*#__PURE__*/_jsxDEV(_Fragment, {\n        children: [/*#__PURE__*/_jsxDEV(ChatContainer, {\n          ref: chatContainerRef,\n          children: /*#__PURE__*/_jsxDEV(AnimatePresence, {\n            children: messages.map(message => /*#__PURE__*/_jsxDEV(MessageBubble, {\n              $isOwn: message.sender === 'driver',\n              initial: {\n                opacity: 0,\n                y: 20\n              },\n              animate: {\n                opacity: 1,\n                y: 0\n              },\n              exit: {\n                opacity: 0,\n                y: -20\n              },\n              transition: {\n                duration: 0.3\n              },\n              children: [message.sender !== 'driver' && /*#__PURE__*/_jsxDEV(Avatar, {\n                $type: message.sender,\n                children: message.sender === 'passenger' ? /*#__PURE__*/_jsxDEV(FaUser, {}, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 494,\n                  columnNumber: 59\n                }, this) : /*#__PURE__*/_jsxDEV(FaCar, {}, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 494,\n                  columnNumber: 72\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 493,\n                columnNumber: 23\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                children: [/*#__PURE__*/_jsxDEV(MessageContent, {\n                  $isOwn: message.sender === 'driver',\n                  children: message.type === 'call' ? /*#__PURE__*/_jsxDEV(CallIndicator, {\n                    children: [/*#__PURE__*/_jsxDEV(FaPhone, {}, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 501,\n                      columnNumber: 29\n                    }, this), message.text]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 500,\n                    columnNumber: 27\n                  }, this) : message.text\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 498,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(MessageTime, {\n                  children: new Date(message.timestamp).toLocaleTimeString()\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 508,\n                  columnNumber: 23\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 497,\n                columnNumber: 21\n              }, this), message.sender === 'driver' && /*#__PURE__*/_jsxDEV(Avatar, {\n                $type: message.sender,\n                children: /*#__PURE__*/_jsxDEV(FaCar, {}, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 514,\n                  columnNumber: 25\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 513,\n                columnNumber: 23\n              }, this)]\n            }, message.id, true, {\n              fileName: _jsxFileName,\n              lineNumber: 484,\n              columnNumber: 19\n            }, this))\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 482,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 481,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(InputContainer, {\n          children: [/*#__PURE__*/_jsxDEV(TextInput, {\n            ref: inputRef,\n            type: \"text\",\n            placeholder: \"Type a message or use voice...\",\n            value: inputText,\n            onChange: e => setInputText(e.target.value),\n            onKeyPress: handleKeyPress,\n            disabled: !isConnected\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 523,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(VoiceButton, {\n            $isListening: isListening,\n            whileHover: {\n              scale: 1.05\n            },\n            whileTap: {\n              scale: 0.95\n            },\n            onClick: startListening,\n            disabled: !isConnected || isListening,\n            children: isListening ? /*#__PURE__*/_jsxDEV(FaMicrophoneSlash, {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 539,\n              columnNumber: 32\n            }, this) : /*#__PURE__*/_jsxDEV(FaMicrophone, {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 539,\n              columnNumber: 56\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 532,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(Button, {\n            whileHover: {\n              scale: 1.05\n            },\n            whileTap: {\n              scale: 0.95\n            },\n            onClick: sendMessage,\n            disabled: !inputText.trim() || !isConnected,\n            children: /*#__PURE__*/_jsxDEV(FaPaperPlane, {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 547,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 541,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(Button, {\n            whileHover: {\n              scale: 1.05\n            },\n            whileTap: {\n              scale: 0.95\n            },\n            onClick: makeCall,\n            disabled: !isConnected,\n            children: /*#__PURE__*/_jsxDEV(FaPhone, {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 555,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 549,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 522,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true), statusMessage && /*#__PURE__*/_jsxDEV(StatusMessage, {\n        children: statusMessage\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 562,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 461,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 455,\n    columnNumber: 5\n  }, this);\n};\n_s(App, \"lAwlPV7WKutwCk+DFzkdbsoFiRU=\");\n_c17 = App;\nexport default App;\nvar _c, _c2, _c3, _c4, _c5, _c6, _c7, _c8, _c9, _c0, _c1, _c10, _c11, _c12, _c13, _c14, _c15, _c16, _c17;\n$RefreshReg$(_c, \"AppContainer\");\n$RefreshReg$(_c2, \"Header\");\n$RefreshReg$(_c3, \"Title\");\n$RefreshReg$(_c4, \"Subtitle\");\n$RefreshReg$(_c5, \"MainContent\");\n$RefreshReg$(_c6, \"BookingCodeInput\");\n$RefreshReg$(_c7, \"Input\");\n$RefreshReg$(_c8, \"ChatContainer\");\n$RefreshReg$(_c9, \"MessageBubble\");\n$RefreshReg$(_c0, \"MessageContent\");\n$RefreshReg$(_c1, \"MessageTime\");\n$RefreshReg$(_c10, \"Avatar\");\n$RefreshReg$(_c11, \"InputContainer\");\n$RefreshReg$(_c12, \"TextInput\");\n$RefreshReg$(_c13, \"Button\");\n$RefreshReg$(_c14, \"VoiceButton\");\n$RefreshReg$(_c15, \"StatusMessage\");\n$RefreshReg$(_c16, \"CallIndicator\");\n$RefreshReg$(_c17, \"App\");","map":{"version":3,"names":["React","useState","useEffect","useRef","styled","motion","AnimatePresence","FaMicrophone","FaMicrophoneSlash","FaPaperPlane","FaPhone","FaUser","FaCar","axios","jsxDEV","_jsxDEV","Fragment","_Fragment","AppContainer","div","_c","Header","header","_c2","Title","h1","_c3","Subtitle","p","_c4","MainContent","main","_c5","BookingCodeInput","_c6","Input","input","_c7","ChatContainer","_c8","MessageBubble","props","$isOwn","_c9","MessageContent","_c0","MessageTime","_c1","Avatar","$type","_c10","InputContainer","_c11","TextInput","_c12","Button","button","_c13","VoiceButton","$isListening","_c14","StatusMessage","_c15","CallIndicator","_c16","App","_s","bookingCode","setBookingCode","messages","setMessages","inputText","setInputText","isListening","setIsListening","isConnected","setIsConnected","recognition","setRecognition","statusMessage","setStatusMessage","chatContainerRef","inputRef","SpeechRecognition","window","webkitSpeechRecognition","continuous","interimResults","lang","onstart","onend","onerror","event","console","error","onresult","transcript","results","current","scrollTop","scrollHeight","connectToBooking","trim","response","get","data","success","welcomeMessage","id","Date","now","toString","text","sender","timestamp","toISOString","type","prev","sendMessage","newMessage","post","booking_code","message","aiResponse","makeCall","call_type","duration","callMessage","callDetails","status","startListening","start","handleKeyPress","e","key","shiftKey","preventDefault","children","fileName","_jsxFileName","lineNumber","columnNumber","placeholder","value","onChange","target","onKeyPress","whileHover","scale","whileTap","onClick","ref","map","initial","opacity","y","animate","exit","transition","toLocaleTimeString","disabled","_c17","$RefreshReg$"],"sources":["/Users/sameer.jha/Python_Projects/NavieTakieSimulation/frontend/dax-app/src/App.tsx"],"sourcesContent":["import React, { useState, useEffect, useRef } from 'react';\nimport styled from 'styled-components';\nimport { motion, AnimatePresence } from 'framer-motion';\nimport { \n  FaMicrophone, \n  FaMicrophoneSlash, \n  FaPaperPlane, \n  FaPhone,\n  FaUser,\n  FaCar\n} from 'react-icons/fa';\nimport axios from 'axios';\n\n// Types\ninterface Message {\n  id: string;\n  text: string;\n  sender: 'driver' | 'passenger' | 'ai';\n  timestamp: string;\n  type: 'text' | 'call';\n  callDetails?: {\n    duration: number;\n    status: string;\n  };\n}\n\ninterface SpeechRecognitionErrorEvent extends Event {\n  error: string;\n  message: string;\n}\n\ninterface SpeechRecognitionResult {\n  transcript: string;\n  confidence: number;\n}\n\ninterface SpeechRecognitionResultList {\n  length: number;\n  item(index: number): SpeechRecognitionResult;\n  [index: number]: SpeechRecognitionResult;\n}\n\ninterface SpeechRecognitionEvent extends Event {\n  resultIndex: number;\n  results: SpeechRecognitionResultList;\n}\n\ninterface VoiceRecognition extends EventTarget {\n  start(): void;\n  stop(): void;\n  abort(): void;\n  continuous: boolean;\n  interimResults: boolean;\n  lang: string;\n  onstart: ((this: VoiceRecognition, ev: Event) => any) | null;\n  onend: ((this: VoiceRecognition, ev: Event) => any) | null;\n  onerror: ((this: VoiceRecognition, ev: SpeechRecognitionErrorEvent) => any) | null;\n  onresult: ((this: VoiceRecognition, ev: SpeechRecognitionEvent) => any) | null;\n}\n\ndeclare global {\n  interface Window {\n    SpeechRecognition: new () => VoiceRecognition;\n    webkitSpeechRecognition: new () => VoiceRecognition;\n  }\n}\n\n// Styled Components\nconst AppContainer = styled.div`\n  min-height: 100vh;\n  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);\n  display: flex;\n  flex-direction: column;\n`;\n\nconst Header = styled.header`\n  background: rgba(255, 255, 255, 0.1);\n  backdrop-filter: blur(10px);\n  padding: 1rem;\n  text-align: center;\n  color: white;\n  box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);\n`;\n\nconst Title = styled.h1`\n  margin: 0;\n  font-size: 1.5rem;\n  font-weight: 600;\n`;\n\nconst Subtitle = styled.p`\n  margin: 0.5rem 0 0 0;\n  font-size: 0.9rem;\n  opacity: 0.8;\n`;\n\nconst MainContent = styled.main`\n  flex: 1;\n  display: flex;\n  flex-direction: column;\n  max-width: 600px;\n  margin: 0 auto;\n  width: 100%;\n  padding: 1rem;\n`;\n\nconst BookingCodeInput = styled.div`\n  background: rgba(255, 255, 255, 0.1);\n  backdrop-filter: blur(10px);\n  border-radius: 15px;\n  padding: 1rem;\n  margin-bottom: 1rem;\n  display: flex;\n  gap: 0.5rem;\n  align-items: center;\n`;\n\nconst Input = styled.input`\n  flex: 1;\n  padding: 0.75rem;\n  border: none;\n  border-radius: 10px;\n  background: rgba(255, 255, 255, 0.9);\n  font-size: 1rem;\n  outline: none;\n  \n  &:focus {\n    box-shadow: 0 0 0 2px rgba(255, 255, 255, 0.3);\n  }\n`;\n\nconst ChatContainer = styled.div`\n  flex: 1;\n  background: rgba(255, 255, 255, 0.1);\n  backdrop-filter: blur(10px);\n  border-radius: 15px;\n  padding: 1rem;\n  margin-bottom: 1rem;\n  overflow-y: auto;\n  max-height: 60vh;\n  display: flex;\n  flex-direction: column;\n  gap: 0.5rem;\n`;\n\nconst MessageBubble = styled(motion.div)<{ $isOwn: boolean }>`\n  display: flex;\n  align-items: flex-start;\n  gap: 0.5rem;\n  justify-content: ${props => props.$isOwn ? 'flex-end' : 'flex-start'};\n`;\n\nconst MessageContent = styled.div<{ $isOwn: boolean }>`\n  background: ${props => props.$isOwn ? 'rgba(255, 255, 255, 0.9)' : 'rgba(255, 255, 255, 0.2)'};\n  color: ${props => props.$isOwn ? '#333' : 'white'};\n  padding: 0.75rem 1rem;\n  border-radius: 18px;\n  max-width: 70%;\n  word-wrap: break-word;\n  position: relative;\n  \n  ${props => props.$isOwn ? `\n    border-bottom-right-radius: 5px;\n  ` : `\n    border-bottom-left-radius: 5px;\n  `}\n`;\n\nconst MessageTime = styled.div`\n  font-size: 0.7rem;\n  opacity: 0.7;\n  margin-top: 0.25rem;\n`;\n\nconst Avatar = styled.div<{ $type: 'driver' | 'passenger' | 'ai' }>`\n  width: 32px;\n  height: 32px;\n  border-radius: 50%;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  background: ${props => {\n    switch (props.$type) {\n      case 'driver': return 'rgba(255, 255, 255, 0.9)';\n      case 'passenger': return 'rgba(255, 255, 255, 0.7)';\n      case 'ai': return 'rgba(255, 255, 255, 0.8)';\n      default: return 'rgba(255, 255, 255, 0.5)';\n    }\n  }};\n  color: #333;\n  font-size: 0.8rem;\n  font-weight: bold;\n`;\n\nconst InputContainer = styled.div`\n  display: flex;\n  gap: 0.5rem;\n  align-items: center;\n  background: rgba(255, 255, 255, 0.1);\n  backdrop-filter: blur(10px);\n  border-radius: 25px;\n  padding: 0.5rem;\n`;\n\nconst TextInput = styled.input`\n  flex: 1;\n  padding: 0.75rem 1rem;\n  border: none;\n  border-radius: 20px;\n  background: rgba(255, 255, 255, 0.9);\n  font-size: 1rem;\n  outline: none;\n  \n  &:focus {\n    box-shadow: 0 0 0 2px rgba(255, 255, 255, 0.3);\n  }\n`;\n\nconst Button = styled(motion.button)`\n  width: 44px;\n  height: 44px;\n  border: none;\n  border-radius: 50%;\n  background: rgba(255, 255, 255, 0.9);\n  color: #333;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  cursor: pointer;\n  font-size: 1.2rem;\n  transition: all 0.2s ease;\n  \n  &:hover {\n    background: rgba(255, 255, 255, 1);\n    transform: scale(1.05);\n  }\n  \n  &:active {\n    transform: scale(0.95);\n  }\n  \n  &:disabled {\n    opacity: 0.5;\n    cursor: not-allowed;\n  }\n`;\n\nconst VoiceButton = styled(Button)<{ $isListening: boolean }>`\n  background: ${props => props.$isListening ? 'rgba(255, 100, 100, 0.9)' : 'rgba(255, 255, 255, 0.9)'};\n  color: ${props => props.$isListening ? 'white' : '#333'};\n`;\n\nconst StatusMessage = styled.div`\n  text-align: center;\n  color: white;\n  font-size: 0.9rem;\n  opacity: 0.8;\n  margin: 0.5rem 0;\n`;\n\nconst CallIndicator = styled.div`\n  display: flex;\n  align-items: center;\n  gap: 0.5rem;\n  background: rgba(255, 100, 100, 0.2);\n  padding: 0.5rem 1rem;\n  border-radius: 10px;\n  color: white;\n  font-size: 0.9rem;\n`;\n\n// App Component\nconst App: React.FC = () => {\n  const [bookingCode, setBookingCode] = useState('');\n  const [messages, setMessages] = useState<Message[]>([]);\n  const [inputText, setInputText] = useState('');\n  const [isListening, setIsListening] = useState(false);\n  const [isConnected, setIsConnected] = useState(false);\n  const [recognition, setRecognition] = useState<VoiceRecognition | null>(null);\n  const [statusMessage, setStatusMessage] = useState('');\n  \n  const chatContainerRef = useRef<HTMLDivElement>(null);\n  const inputRef = useRef<HTMLInputElement>(null);\n\n  // Initialize speech recognition\n  useEffect(() => {\n    const SpeechRecognition = window.SpeechRecognition || window.webkitSpeechRecognition;\n    if (SpeechRecognition) {\n      const recognition = new SpeechRecognition();\n      recognition.continuous = false;\n      recognition.interimResults = false;\n      recognition.lang = 'en-US';\n      \n      recognition.onstart = () => {\n        setIsListening(true);\n        setStatusMessage('Listening...');\n      };\n      \n      recognition.onend = () => {\n        setIsListening(false);\n        setStatusMessage('');\n      };\n      \n      recognition.onerror = (event) => {\n        console.error('Speech recognition error:', event.error);\n        setIsListening(false);\n        setStatusMessage('Voice recognition error. Please try again.');\n      };\n      \n      recognition.onresult = (event) => {\n        const transcript = event.results[0].transcript;\n        setInputText(transcript);\n        setStatusMessage('Processing voice input...');\n      };\n      \n      setRecognition(recognition);\n    } else {\n      setStatusMessage('Voice recognition not supported in this browser.');\n    }\n  }, []);\n\n  // Auto-scroll to bottom when new messages arrive\n  useEffect(() => {\n    if (chatContainerRef.current) {\n      chatContainerRef.current.scrollTop = chatContainerRef.current.scrollHeight;\n    }\n  }, [messages]);\n\n  // Connect to booking\n  const connectToBooking = async () => {\n    if (!bookingCode.trim()) {\n      setStatusMessage('Please enter a booking code.');\n      return;\n    }\n\n    try {\n      setStatusMessage('Connecting to booking...');\n      \n      // Test connection by getting messages\n      const response = await axios.get(`/api/v1/get_message/${bookingCode}`);\n      \n      if (response.data.success) {\n        setIsConnected(true);\n        setMessages(response.data.data.messages || []);\n        setStatusMessage('Connected successfully!');\n        \n        // Add welcome message\n        const welcomeMessage: Message = {\n          id: Date.now().toString(),\n          text: `Welcome to booking ${bookingCode}! How can I help you today?`,\n          sender: 'ai',\n          timestamp: new Date().toISOString(),\n          type: 'text'\n        };\n        setMessages(prev => [...prev, welcomeMessage]);\n      }\n    } catch (error) {\n      console.error('Connection error:', error);\n      setStatusMessage('Failed to connect. Please check your booking code.');\n    }\n  };\n\n  // Send message\n  const sendMessage = async () => {\n    if (!inputText.trim() || !isConnected) return;\n\n    const newMessage: Message = {\n      id: Date.now().toString(),\n      text: inputText,\n      sender: 'driver',\n      timestamp: new Date().toISOString(),\n      type: 'text'\n    };\n\n    setMessages(prev => [...prev, newMessage]);\n    setInputText('');\n    setStatusMessage('Sending message...');\n\n    try {\n      const response = await axios.post('/api/v1/send_message', {\n        booking_code: bookingCode,\n        message: inputText,\n        sender: 'driver'\n      });\n\n      if (response.data.success) {\n        setStatusMessage('Message sent successfully!');\n        \n        // Add AI response\n        const aiResponse: Message = {\n          id: (Date.now() + 1).toString(),\n          text: 'Message sent successfully. The passenger will be notified.',\n          sender: 'ai',\n          timestamp: new Date().toISOString(),\n          type: 'text'\n        };\n        setMessages(prev => [...prev, aiResponse]);\n      }\n    } catch (error) {\n      console.error('Send message error:', error);\n      setStatusMessage('Failed to send message. Please try again.');\n    }\n  };\n\n  // Make call\n  const makeCall = async () => {\n    if (!isConnected) return;\n\n    setStatusMessage('Initiating call...');\n\n    try {\n      const response = await axios.post('/api/v1/make_call', {\n        booking_code: bookingCode,\n        call_type: 'voice',\n        duration: 0\n      });\n\n      if (response.data.success) {\n        const callMessage: Message = {\n          id: Date.now().toString(),\n          text: 'Call initiated successfully',\n          sender: 'ai',\n          timestamp: new Date().toISOString(),\n          type: 'call',\n          callDetails: {\n            duration: 0,\n            status: 'initiated'\n          }\n        };\n        setMessages(prev => [...prev, callMessage]);\n        setStatusMessage('Call initiated!');\n      }\n    } catch (error) {\n      console.error('Make call error:', error);\n      setStatusMessage('Failed to initiate call. Please try again.');\n    }\n  };\n\n  // Start voice recognition\n  const startListening = () => {\n    if (recognition && !isListening) {\n      recognition.start();\n    }\n  };\n\n  // Handle key press\n  const handleKeyPress = (e: React.KeyboardEvent) => {\n    if (e.key === 'Enter' && !e.shiftKey) {\n      e.preventDefault();\n      sendMessage();\n    }\n  };\n\n  return (\n    <AppContainer>\n      <Header>\n        <Title>DAX - Driver Assistant</Title>\n        <Subtitle>AI-powered chat and voice assistant</Subtitle>\n      </Header>\n\n      <MainContent>\n        {!isConnected ? (\n          <BookingCodeInput>\n            <Input\n              type=\"text\"\n              placeholder=\"Enter booking code...\"\n              value={bookingCode}\n              onChange={(e) => setBookingCode(e.target.value)}\n              onKeyPress={(e) => e.key === 'Enter' && connectToBooking()}\n            />\n            <Button\n              whileHover={{ scale: 1.05 }}\n              whileTap={{ scale: 0.95 }}\n              onClick={connectToBooking}\n            >\n              Connect\n            </Button>\n          </BookingCodeInput>\n        ) : (\n          <>\n            <ChatContainer ref={chatContainerRef}>\n              <AnimatePresence>\n                {messages.map((message) => (\n                  <MessageBubble\n                    key={message.id}\n                    $isOwn={message.sender === 'driver'}\n                    initial={{ opacity: 0, y: 20 }}\n                    animate={{ opacity: 1, y: 0 }}\n                    exit={{ opacity: 0, y: -20 }}\n                    transition={{ duration: 0.3 }}\n                  >\n                    {message.sender !== 'driver' && (\n                      <Avatar $type={message.sender}>\n                        {message.sender === 'passenger' ? <FaUser /> : <FaCar />}\n                      </Avatar>\n                    )}\n                    <div>\n                      <MessageContent $isOwn={message.sender === 'driver'}>\n                        {message.type === 'call' ? (\n                          <CallIndicator>\n                            <FaPhone />\n                            {message.text}\n                          </CallIndicator>\n                        ) : (\n                          message.text\n                        )}\n                      </MessageContent>\n                      <MessageTime>\n                        {new Date(message.timestamp).toLocaleTimeString()}\n                      </MessageTime>\n                    </div>\n                    {message.sender === 'driver' && (\n                      <Avatar $type={message.sender}>\n                        <FaCar />\n                      </Avatar>\n                    )}\n                  </MessageBubble>\n                ))}\n              </AnimatePresence>\n            </ChatContainer>\n\n            <InputContainer>\n              <TextInput\n                ref={inputRef}\n                type=\"text\"\n                placeholder=\"Type a message or use voice...\"\n                value={inputText}\n                onChange={(e) => setInputText(e.target.value)}\n                onKeyPress={handleKeyPress}\n                disabled={!isConnected}\n              />\n              <VoiceButton\n                $isListening={isListening}\n                whileHover={{ scale: 1.05 }}\n                whileTap={{ scale: 0.95 }}\n                onClick={startListening}\n                disabled={!isConnected || isListening}\n              >\n                {isListening ? <FaMicrophoneSlash /> : <FaMicrophone />}\n              </VoiceButton>\n              <Button\n                whileHover={{ scale: 1.05 }}\n                whileTap={{ scale: 0.95 }}\n                onClick={sendMessage}\n                disabled={!inputText.trim() || !isConnected}\n              >\n                <FaPaperPlane />\n              </Button>\n              <Button\n                whileHover={{ scale: 1.05 }}\n                whileTap={{ scale: 0.95 }}\n                onClick={makeCall}\n                disabled={!isConnected}\n              >\n                <FaPhone />\n              </Button>\n            </InputContainer>\n          </>\n        )}\n\n        {statusMessage && (\n          <StatusMessage>{statusMessage}</StatusMessage>\n        )}\n      </MainContent>\n    </AppContainer>\n  );\n};\n\nexport default App; "],"mappings":";;AAAA,OAAOA,KAAK,IAAIC,QAAQ,EAAEC,SAAS,EAAEC,MAAM,QAAQ,OAAO;AAC1D,OAAOC,MAAM,MAAM,mBAAmB;AACtC,SAASC,MAAM,EAAEC,eAAe,QAAQ,eAAe;AACvD,SACEC,YAAY,EACZC,iBAAiB,EACjBC,YAAY,EACZC,OAAO,EACPC,MAAM,EACNC,KAAK,QACA,gBAAgB;AACvB,OAAOC,KAAK,MAAM,OAAO;;AAEzB;AAAA,SAAAC,MAAA,IAAAC,OAAA,EAAAC,QAAA,IAAAC,SAAA;AAsDA;AACA,MAAMC,YAAY,GAAGd,MAAM,CAACe,GAAG;AAC/B;AACA;AACA;AACA;AACA,CAAC;AAACC,EAAA,GALIF,YAAY;AAOlB,MAAMG,MAAM,GAAGjB,MAAM,CAACkB,MAAM;AAC5B;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AAACC,GAAA,GAPIF,MAAM;AASZ,MAAMG,KAAK,GAAGpB,MAAM,CAACqB,EAAE;AACvB;AACA;AACA;AACA,CAAC;AAACC,GAAA,GAJIF,KAAK;AAMX,MAAMG,QAAQ,GAAGvB,MAAM,CAACwB,CAAC;AACzB;AACA;AACA;AACA,CAAC;AAACC,GAAA,GAJIF,QAAQ;AAMd,MAAMG,WAAW,GAAG1B,MAAM,CAAC2B,IAAI;AAC/B;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AAACC,GAAA,GARIF,WAAW;AAUjB,MAAMG,gBAAgB,GAAG7B,MAAM,CAACe,GAAG;AACnC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AAACe,GAAA,GATID,gBAAgB;AAWtB,MAAME,KAAK,GAAG/B,MAAM,CAACgC,KAAK;AAC1B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AAACC,GAAA,GAZIF,KAAK;AAcX,MAAMG,aAAa,GAAGlC,MAAM,CAACe,GAAG;AAChC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AAACoB,GAAA,GAZID,aAAa;AAcnB,MAAME,aAAa,GAAGpC,MAAM,CAACC,MAAM,CAACc,GAAG,CAAsB;AAC7D;AACA;AACA;AACA,qBAAqBsB,KAAK,IAAIA,KAAK,CAACC,MAAM,GAAG,UAAU,GAAG,YAAY;AACtE,CAAC;AAACC,GAAA,GALIH,aAAa;AAOnB,MAAMI,cAAc,GAAGxC,MAAM,CAACe,GAAwB;AACtD,gBAAgBsB,KAAK,IAAIA,KAAK,CAACC,MAAM,GAAG,0BAA0B,GAAG,0BAA0B;AAC/F,WAAWD,KAAK,IAAIA,KAAK,CAACC,MAAM,GAAG,MAAM,GAAG,OAAO;AACnD;AACA;AACA;AACA;AACA;AACA;AACA,IAAID,KAAK,IAAIA,KAAK,CAACC,MAAM,GAAG;AAC5B;AACA,GAAG,GAAG;AACN;AACA,GAAG;AACH,CAAC;AAACG,GAAA,GAdID,cAAc;AAgBpB,MAAME,WAAW,GAAG1C,MAAM,CAACe,GAAG;AAC9B;AACA;AACA;AACA,CAAC;AAAC4B,GAAA,GAJID,WAAW;AAMjB,MAAME,MAAM,GAAG5C,MAAM,CAACe,GAA6C;AACnE;AACA;AACA;AACA;AACA;AACA;AACA,gBAAgBsB,KAAK,IAAI;EACrB,QAAQA,KAAK,CAACQ,KAAK;IACjB,KAAK,QAAQ;MAAE,OAAO,0BAA0B;IAChD,KAAK,WAAW;MAAE,OAAO,0BAA0B;IACnD,KAAK,IAAI;MAAE,OAAO,0BAA0B;IAC5C;MAAS,OAAO,0BAA0B;EAC5C;AACF,CAAC;AACH;AACA;AACA;AACA,CAAC;AAACC,IAAA,GAlBIF,MAAM;AAoBZ,MAAMG,cAAc,GAAG/C,MAAM,CAACe,GAAG;AACjC;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AAACiC,IAAA,GARID,cAAc;AAUpB,MAAME,SAAS,GAAGjD,MAAM,CAACgC,KAAK;AAC9B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AAACkB,IAAA,GAZID,SAAS;AAcf,MAAME,MAAM,GAAGnD,MAAM,CAACC,MAAM,CAACmD,MAAM,CAAC;AACpC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AAACC,IAAA,GA3BIF,MAAM;AA6BZ,MAAMG,WAAW,GAAGtD,MAAM,CAACmD,MAAM,CAA4B;AAC7D,gBAAgBd,KAAK,IAAIA,KAAK,CAACkB,YAAY,GAAG,0BAA0B,GAAG,0BAA0B;AACrG,WAAWlB,KAAK,IAAIA,KAAK,CAACkB,YAAY,GAAG,OAAO,GAAG,MAAM;AACzD,CAAC;AAACC,IAAA,GAHIF,WAAW;AAKjB,MAAMG,aAAa,GAAGzD,MAAM,CAACe,GAAG;AAChC;AACA;AACA;AACA;AACA;AACA,CAAC;AAAC2C,IAAA,GANID,aAAa;AAQnB,MAAME,aAAa,GAAG3D,MAAM,CAACe,GAAG;AAChC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;;AAED;AAAA6C,IAAA,GAXMD,aAAa;AAYnB,MAAME,GAAa,GAAGA,CAAA,KAAM;EAAAC,EAAA;EAC1B,MAAM,CAACC,WAAW,EAAEC,cAAc,CAAC,GAAGnE,QAAQ,CAAC,EAAE,CAAC;EAClD,MAAM,CAACoE,QAAQ,EAAEC,WAAW,CAAC,GAAGrE,QAAQ,CAAY,EAAE,CAAC;EACvD,MAAM,CAACsE,SAAS,EAAEC,YAAY,CAAC,GAAGvE,QAAQ,CAAC,EAAE,CAAC;EAC9C,MAAM,CAACwE,WAAW,EAAEC,cAAc,CAAC,GAAGzE,QAAQ,CAAC,KAAK,CAAC;EACrD,MAAM,CAAC0E,WAAW,EAAEC,cAAc,CAAC,GAAG3E,QAAQ,CAAC,KAAK,CAAC;EACrD,MAAM,CAAC4E,WAAW,EAAEC,cAAc,CAAC,GAAG7E,QAAQ,CAA0B,IAAI,CAAC;EAC7E,MAAM,CAAC8E,aAAa,EAAEC,gBAAgB,CAAC,GAAG/E,QAAQ,CAAC,EAAE,CAAC;EAEtD,MAAMgF,gBAAgB,GAAG9E,MAAM,CAAiB,IAAI,CAAC;EACrD,MAAM+E,QAAQ,GAAG/E,MAAM,CAAmB,IAAI,CAAC;;EAE/C;EACAD,SAAS,CAAC,MAAM;IACd,MAAMiF,iBAAiB,GAAGC,MAAM,CAACD,iBAAiB,IAAIC,MAAM,CAACC,uBAAuB;IACpF,IAAIF,iBAAiB,EAAE;MACrB,MAAMN,WAAW,GAAG,IAAIM,iBAAiB,CAAC,CAAC;MAC3CN,WAAW,CAACS,UAAU,GAAG,KAAK;MAC9BT,WAAW,CAACU,cAAc,GAAG,KAAK;MAClCV,WAAW,CAACW,IAAI,GAAG,OAAO;MAE1BX,WAAW,CAACY,OAAO,GAAG,MAAM;QAC1Bf,cAAc,CAAC,IAAI,CAAC;QACpBM,gBAAgB,CAAC,cAAc,CAAC;MAClC,CAAC;MAEDH,WAAW,CAACa,KAAK,GAAG,MAAM;QACxBhB,cAAc,CAAC,KAAK,CAAC;QACrBM,gBAAgB,CAAC,EAAE,CAAC;MACtB,CAAC;MAEDH,WAAW,CAACc,OAAO,GAAIC,KAAK,IAAK;QAC/BC,OAAO,CAACC,KAAK,CAAC,2BAA2B,EAAEF,KAAK,CAACE,KAAK,CAAC;QACvDpB,cAAc,CAAC,KAAK,CAAC;QACrBM,gBAAgB,CAAC,4CAA4C,CAAC;MAChE,CAAC;MAEDH,WAAW,CAACkB,QAAQ,GAAIH,KAAK,IAAK;QAChC,MAAMI,UAAU,GAAGJ,KAAK,CAACK,OAAO,CAAC,CAAC,CAAC,CAACD,UAAU;QAC9CxB,YAAY,CAACwB,UAAU,CAAC;QACxBhB,gBAAgB,CAAC,2BAA2B,CAAC;MAC/C,CAAC;MAEDF,cAAc,CAACD,WAAW,CAAC;IAC7B,CAAC,MAAM;MACLG,gBAAgB,CAAC,kDAAkD,CAAC;IACtE;EACF,CAAC,EAAE,EAAE,CAAC;;EAEN;EACA9E,SAAS,CAAC,MAAM;IACd,IAAI+E,gBAAgB,CAACiB,OAAO,EAAE;MAC5BjB,gBAAgB,CAACiB,OAAO,CAACC,SAAS,GAAGlB,gBAAgB,CAACiB,OAAO,CAACE,YAAY;IAC5E;EACF,CAAC,EAAE,CAAC/B,QAAQ,CAAC,CAAC;;EAEd;EACA,MAAMgC,gBAAgB,GAAG,MAAAA,CAAA,KAAY;IACnC,IAAI,CAAClC,WAAW,CAACmC,IAAI,CAAC,CAAC,EAAE;MACvBtB,gBAAgB,CAAC,8BAA8B,CAAC;MAChD;IACF;IAEA,IAAI;MACFA,gBAAgB,CAAC,0BAA0B,CAAC;;MAE5C;MACA,MAAMuB,QAAQ,GAAG,MAAM1F,KAAK,CAAC2F,GAAG,CAAC,uBAAuBrC,WAAW,EAAE,CAAC;MAEtE,IAAIoC,QAAQ,CAACE,IAAI,CAACC,OAAO,EAAE;QACzB9B,cAAc,CAAC,IAAI,CAAC;QACpBN,WAAW,CAACiC,QAAQ,CAACE,IAAI,CAACA,IAAI,CAACpC,QAAQ,IAAI,EAAE,CAAC;QAC9CW,gBAAgB,CAAC,yBAAyB,CAAC;;QAE3C;QACA,MAAM2B,cAAuB,GAAG;UAC9BC,EAAE,EAAEC,IAAI,CAACC,GAAG,CAAC,CAAC,CAACC,QAAQ,CAAC,CAAC;UACzBC,IAAI,EAAE,sBAAsB7C,WAAW,6BAA6B;UACpE8C,MAAM,EAAE,IAAI;UACZC,SAAS,EAAE,IAAIL,IAAI,CAAC,CAAC,CAACM,WAAW,CAAC,CAAC;UACnCC,IAAI,EAAE;QACR,CAAC;QACD9C,WAAW,CAAC+C,IAAI,IAAI,CAAC,GAAGA,IAAI,EAAEV,cAAc,CAAC,CAAC;MAChD;IACF,CAAC,CAAC,OAAOb,KAAK,EAAE;MACdD,OAAO,CAACC,KAAK,CAAC,mBAAmB,EAAEA,KAAK,CAAC;MACzCd,gBAAgB,CAAC,oDAAoD,CAAC;IACxE;EACF,CAAC;;EAED;EACA,MAAMsC,WAAW,GAAG,MAAAA,CAAA,KAAY;IAC9B,IAAI,CAAC/C,SAAS,CAAC+B,IAAI,CAAC,CAAC,IAAI,CAAC3B,WAAW,EAAE;IAEvC,MAAM4C,UAAmB,GAAG;MAC1BX,EAAE,EAAEC,IAAI,CAACC,GAAG,CAAC,CAAC,CAACC,QAAQ,CAAC,CAAC;MACzBC,IAAI,EAAEzC,SAAS;MACf0C,MAAM,EAAE,QAAQ;MAChBC,SAAS,EAAE,IAAIL,IAAI,CAAC,CAAC,CAACM,WAAW,CAAC,CAAC;MACnCC,IAAI,EAAE;IACR,CAAC;IAED9C,WAAW,CAAC+C,IAAI,IAAI,CAAC,GAAGA,IAAI,EAAEE,UAAU,CAAC,CAAC;IAC1C/C,YAAY,CAAC,EAAE,CAAC;IAChBQ,gBAAgB,CAAC,oBAAoB,CAAC;IAEtC,IAAI;MACF,MAAMuB,QAAQ,GAAG,MAAM1F,KAAK,CAAC2G,IAAI,CAAC,sBAAsB,EAAE;QACxDC,YAAY,EAAEtD,WAAW;QACzBuD,OAAO,EAAEnD,SAAS;QAClB0C,MAAM,EAAE;MACV,CAAC,CAAC;MAEF,IAAIV,QAAQ,CAACE,IAAI,CAACC,OAAO,EAAE;QACzB1B,gBAAgB,CAAC,4BAA4B,CAAC;;QAE9C;QACA,MAAM2C,UAAmB,GAAG;UAC1Bf,EAAE,EAAE,CAACC,IAAI,CAACC,GAAG,CAAC,CAAC,GAAG,CAAC,EAAEC,QAAQ,CAAC,CAAC;UAC/BC,IAAI,EAAE,4DAA4D;UAClEC,MAAM,EAAE,IAAI;UACZC,SAAS,EAAE,IAAIL,IAAI,CAAC,CAAC,CAACM,WAAW,CAAC,CAAC;UACnCC,IAAI,EAAE;QACR,CAAC;QACD9C,WAAW,CAAC+C,IAAI,IAAI,CAAC,GAAGA,IAAI,EAAEM,UAAU,CAAC,CAAC;MAC5C;IACF,CAAC,CAAC,OAAO7B,KAAK,EAAE;MACdD,OAAO,CAACC,KAAK,CAAC,qBAAqB,EAAEA,KAAK,CAAC;MAC3Cd,gBAAgB,CAAC,2CAA2C,CAAC;IAC/D;EACF,CAAC;;EAED;EACA,MAAM4C,QAAQ,GAAG,MAAAA,CAAA,KAAY;IAC3B,IAAI,CAACjD,WAAW,EAAE;IAElBK,gBAAgB,CAAC,oBAAoB,CAAC;IAEtC,IAAI;MACF,MAAMuB,QAAQ,GAAG,MAAM1F,KAAK,CAAC2G,IAAI,CAAC,mBAAmB,EAAE;QACrDC,YAAY,EAAEtD,WAAW;QACzB0D,SAAS,EAAE,OAAO;QAClBC,QAAQ,EAAE;MACZ,CAAC,CAAC;MAEF,IAAIvB,QAAQ,CAACE,IAAI,CAACC,OAAO,EAAE;QACzB,MAAMqB,WAAoB,GAAG;UAC3BnB,EAAE,EAAEC,IAAI,CAACC,GAAG,CAAC,CAAC,CAACC,QAAQ,CAAC,CAAC;UACzBC,IAAI,EAAE,6BAA6B;UACnCC,MAAM,EAAE,IAAI;UACZC,SAAS,EAAE,IAAIL,IAAI,CAAC,CAAC,CAACM,WAAW,CAAC,CAAC;UACnCC,IAAI,EAAE,MAAM;UACZY,WAAW,EAAE;YACXF,QAAQ,EAAE,CAAC;YACXG,MAAM,EAAE;UACV;QACF,CAAC;QACD3D,WAAW,CAAC+C,IAAI,IAAI,CAAC,GAAGA,IAAI,EAAEU,WAAW,CAAC,CAAC;QAC3C/C,gBAAgB,CAAC,iBAAiB,CAAC;MACrC;IACF,CAAC,CAAC,OAAOc,KAAK,EAAE;MACdD,OAAO,CAACC,KAAK,CAAC,kBAAkB,EAAEA,KAAK,CAAC;MACxCd,gBAAgB,CAAC,4CAA4C,CAAC;IAChE;EACF,CAAC;;EAED;EACA,MAAMkD,cAAc,GAAGA,CAAA,KAAM;IAC3B,IAAIrD,WAAW,IAAI,CAACJ,WAAW,EAAE;MAC/BI,WAAW,CAACsD,KAAK,CAAC,CAAC;IACrB;EACF,CAAC;;EAED;EACA,MAAMC,cAAc,GAAIC,CAAsB,IAAK;IACjD,IAAIA,CAAC,CAACC,GAAG,KAAK,OAAO,IAAI,CAACD,CAAC,CAACE,QAAQ,EAAE;MACpCF,CAAC,CAACG,cAAc,CAAC,CAAC;MAClBlB,WAAW,CAAC,CAAC;IACf;EACF,CAAC;EAED,oBACEvG,OAAA,CAACG,YAAY;IAAAuH,QAAA,gBACX1H,OAAA,CAACM,MAAM;MAAAoH,QAAA,gBACL1H,OAAA,CAACS,KAAK;QAAAiH,QAAA,EAAC;MAAsB;QAAAC,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAO,CAAC,eACrC9H,OAAA,CAACY,QAAQ;QAAA8G,QAAA,EAAC;MAAmC;QAAAC,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAU,CAAC;IAAA;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAClD,CAAC,eAET9H,OAAA,CAACe,WAAW;MAAA2G,QAAA,GACT,CAAC9D,WAAW,gBACX5D,OAAA,CAACkB,gBAAgB;QAAAwG,QAAA,gBACf1H,OAAA,CAACoB,KAAK;UACJiF,IAAI,EAAC,MAAM;UACX0B,WAAW,EAAC,uBAAuB;UACnCC,KAAK,EAAE5E,WAAY;UACnB6E,QAAQ,EAAGX,CAAC,IAAKjE,cAAc,CAACiE,CAAC,CAACY,MAAM,CAACF,KAAK,CAAE;UAChDG,UAAU,EAAGb,CAAC,IAAKA,CAAC,CAACC,GAAG,KAAK,OAAO,IAAIjC,gBAAgB,CAAC;QAAE;UAAAqC,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAC5D,CAAC,eACF9H,OAAA,CAACwC,MAAM;UACL4F,UAAU,EAAE;YAAEC,KAAK,EAAE;UAAK,CAAE;UAC5BC,QAAQ,EAAE;YAAED,KAAK,EAAE;UAAK,CAAE;UAC1BE,OAAO,EAAEjD,gBAAiB;UAAAoC,QAAA,EAC3B;QAED;UAAAC,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAQ,CAAC;MAAA;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACO,CAAC,gBAEnB9H,OAAA,CAAAE,SAAA;QAAAwH,QAAA,gBACE1H,OAAA,CAACuB,aAAa;UAACiH,GAAG,EAAEtE,gBAAiB;UAAAwD,QAAA,eACnC1H,OAAA,CAACT,eAAe;YAAAmI,QAAA,EACbpE,QAAQ,CAACmF,GAAG,CAAE9B,OAAO,iBACpB3G,OAAA,CAACyB,aAAa;cAEZE,MAAM,EAAEgF,OAAO,CAACT,MAAM,KAAK,QAAS;cACpCwC,OAAO,EAAE;gBAAEC,OAAO,EAAE,CAAC;gBAAEC,CAAC,EAAE;cAAG,CAAE;cAC/BC,OAAO,EAAE;gBAAEF,OAAO,EAAE,CAAC;gBAAEC,CAAC,EAAE;cAAE,CAAE;cAC9BE,IAAI,EAAE;gBAAEH,OAAO,EAAE,CAAC;gBAAEC,CAAC,EAAE,CAAC;cAAG,CAAE;cAC7BG,UAAU,EAAE;gBAAEhC,QAAQ,EAAE;cAAI,CAAE;cAAAW,QAAA,GAE7Bf,OAAO,CAACT,MAAM,KAAK,QAAQ,iBAC1BlG,OAAA,CAACiC,MAAM;gBAACC,KAAK,EAAEyE,OAAO,CAACT,MAAO;gBAAAwB,QAAA,EAC3Bf,OAAO,CAACT,MAAM,KAAK,WAAW,gBAAGlG,OAAA,CAACJ,MAAM;kBAAA+H,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OAAE,CAAC,gBAAG9H,OAAA,CAACH,KAAK;kBAAA8H,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OAAE;cAAC;gBAAAH,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAClD,CACT,eACD9H,OAAA;gBAAA0H,QAAA,gBACE1H,OAAA,CAAC6B,cAAc;kBAACF,MAAM,EAAEgF,OAAO,CAACT,MAAM,KAAK,QAAS;kBAAAwB,QAAA,EACjDf,OAAO,CAACN,IAAI,KAAK,MAAM,gBACtBrG,OAAA,CAACgD,aAAa;oBAAA0E,QAAA,gBACZ1H,OAAA,CAACL,OAAO;sBAAAgI,QAAA,EAAAC,YAAA;sBAAAC,UAAA;sBAAAC,YAAA;oBAAA,OAAE,CAAC,EACVnB,OAAO,CAACV,IAAI;kBAAA;oBAAA0B,QAAA,EAAAC,YAAA;oBAAAC,UAAA;oBAAAC,YAAA;kBAAA,OACA,CAAC,GAEhBnB,OAAO,CAACV;gBACT;kBAAA0B,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OACa,CAAC,eACjB9H,OAAA,CAAC+B,WAAW;kBAAA2F,QAAA,EACT,IAAI5B,IAAI,CAACa,OAAO,CAACR,SAAS,CAAC,CAAC6C,kBAAkB,CAAC;gBAAC;kBAAArB,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OACtC,CAAC;cAAA;gBAAAH,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OACX,CAAC,EACLnB,OAAO,CAACT,MAAM,KAAK,QAAQ,iBAC1BlG,OAAA,CAACiC,MAAM;gBAACC,KAAK,EAAEyE,OAAO,CAACT,MAAO;gBAAAwB,QAAA,eAC5B1H,OAAA,CAACH,KAAK;kBAAA8H,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OAAE;cAAC;gBAAAH,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OACH,CACT;YAAA,GA/BInB,OAAO,CAACd,EAAE;cAAA8B,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAgCF,CAChB;UAAC;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACa;QAAC;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACL,CAAC,eAEhB9H,OAAA,CAACoC,cAAc;UAAAsF,QAAA,gBACb1H,OAAA,CAACsC,SAAS;YACRkG,GAAG,EAAErE,QAAS;YACdkC,IAAI,EAAC,MAAM;YACX0B,WAAW,EAAC,gCAAgC;YAC5CC,KAAK,EAAExE,SAAU;YACjByE,QAAQ,EAAGX,CAAC,IAAK7D,YAAY,CAAC6D,CAAC,CAACY,MAAM,CAACF,KAAK,CAAE;YAC9CG,UAAU,EAAEd,cAAe;YAC3B4B,QAAQ,EAAE,CAACrF;UAAY;YAAA+D,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACxB,CAAC,eACF9H,OAAA,CAAC2C,WAAW;YACVC,YAAY,EAAEc,WAAY;YAC1B0E,UAAU,EAAE;cAAEC,KAAK,EAAE;YAAK,CAAE;YAC5BC,QAAQ,EAAE;cAAED,KAAK,EAAE;YAAK,CAAE;YAC1BE,OAAO,EAAEpB,cAAe;YACxB8B,QAAQ,EAAE,CAACrF,WAAW,IAAIF,WAAY;YAAAgE,QAAA,EAErChE,WAAW,gBAAG1D,OAAA,CAACP,iBAAiB;cAAAkI,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAE,CAAC,gBAAG9H,OAAA,CAACR,YAAY;cAAAmI,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAE;UAAC;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAC5C,CAAC,eACd9H,OAAA,CAACwC,MAAM;YACL4F,UAAU,EAAE;cAAEC,KAAK,EAAE;YAAK,CAAE;YAC5BC,QAAQ,EAAE;cAAED,KAAK,EAAE;YAAK,CAAE;YAC1BE,OAAO,EAAEhC,WAAY;YACrB0C,QAAQ,EAAE,CAACzF,SAAS,CAAC+B,IAAI,CAAC,CAAC,IAAI,CAAC3B,WAAY;YAAA8D,QAAA,eAE5C1H,OAAA,CAACN,YAAY;cAAAiI,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAE;UAAC;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACV,CAAC,eACT9H,OAAA,CAACwC,MAAM;YACL4F,UAAU,EAAE;cAAEC,KAAK,EAAE;YAAK,CAAE;YAC5BC,QAAQ,EAAE;cAAED,KAAK,EAAE;YAAK,CAAE;YAC1BE,OAAO,EAAE1B,QAAS;YAClBoC,QAAQ,EAAE,CAACrF,WAAY;YAAA8D,QAAA,eAEvB1H,OAAA,CAACL,OAAO;cAAAgI,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAE;UAAC;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACL,CAAC;QAAA;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACK,CAAC;MAAA,eACjB,CACH,EAEA9D,aAAa,iBACZhE,OAAA,CAAC8C,aAAa;QAAA4E,QAAA,EAAE1D;MAAa;QAAA2D,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAgB,CAC9C;IAAA;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACU,CAAC;EAAA;IAAAH,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OACF,CAAC;AAEnB,CAAC;AAAC3E,EAAA,CAtSID,GAAa;AAAAgG,IAAA,GAAbhG,GAAa;AAwSnB,eAAeA,GAAG;AAAC,IAAA7C,EAAA,EAAAG,GAAA,EAAAG,GAAA,EAAAG,GAAA,EAAAG,GAAA,EAAAE,GAAA,EAAAG,GAAA,EAAAE,GAAA,EAAAI,GAAA,EAAAE,GAAA,EAAAE,GAAA,EAAAG,IAAA,EAAAE,IAAA,EAAAE,IAAA,EAAAG,IAAA,EAAAG,IAAA,EAAAE,IAAA,EAAAE,IAAA,EAAAiG,IAAA;AAAAC,YAAA,CAAA9I,EAAA;AAAA8I,YAAA,CAAA3I,GAAA;AAAA2I,YAAA,CAAAxI,GAAA;AAAAwI,YAAA,CAAArI,GAAA;AAAAqI,YAAA,CAAAlI,GAAA;AAAAkI,YAAA,CAAAhI,GAAA;AAAAgI,YAAA,CAAA7H,GAAA;AAAA6H,YAAA,CAAA3H,GAAA;AAAA2H,YAAA,CAAAvH,GAAA;AAAAuH,YAAA,CAAArH,GAAA;AAAAqH,YAAA,CAAAnH,GAAA;AAAAmH,YAAA,CAAAhH,IAAA;AAAAgH,YAAA,CAAA9G,IAAA;AAAA8G,YAAA,CAAA5G,IAAA;AAAA4G,YAAA,CAAAzG,IAAA;AAAAyG,YAAA,CAAAtG,IAAA;AAAAsG,YAAA,CAAApG,IAAA;AAAAoG,YAAA,CAAAlG,IAAA;AAAAkG,YAAA,CAAAD,IAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}