{"ast":null,"code":"var _jsxFileName = \"/Users/sameer.jha/Python_Projects/NavieTakieSimulation/frontend/dax-app/src/App.tsx\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect, useRef } from 'react';\nimport styled from 'styled-components';\nimport { motion, AnimatePresence } from 'framer-motion';\nimport { FaMicrophone, FaMicrophoneSlash, FaPaperPlane, FaPhone, FaUser, FaCar } from 'react-icons/fa';\nimport axios from 'axios';\nimport { API_ENDPOINTS, CONFIG } from './config';\n\n// Types\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\n// Styled Components\nconst AppContainer = styled.div`\n  min-height: 100vh;\n  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);\n  display: flex;\n  flex-direction: column;\n`;\n_c = AppContainer;\nconst Header = styled.header`\n  background: rgba(255, 255, 255, 0.1);\n  backdrop-filter: blur(10px);\n  padding: 1rem;\n  text-align: center;\n  color: white;\n  box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);\n`;\n_c2 = Header;\nconst Title = styled.h1`\n  margin: 0;\n  font-size: 1.5rem;\n  font-weight: 600;\n`;\n_c3 = Title;\nconst Subtitle = styled.p`\n  margin: 0.5rem 0 0 0;\n  font-size: 0.9rem;\n  opacity: 0.8;\n`;\n_c4 = Subtitle;\nconst MainContent = styled.main`\n  flex: 1;\n  display: flex;\n  flex-direction: column;\n  max-width: 600px;\n  margin: 0 auto;\n  width: 100%;\n  padding: 1rem;\n`;\n_c5 = MainContent;\nconst BookingCodeInput = styled.div`\n  background: rgba(255, 255, 255, 0.1);\n  backdrop-filter: blur(10px);\n  border-radius: 15px;\n  padding: 1rem;\n  margin-bottom: 1rem;\n  display: flex;\n  gap: 0.5rem;\n  align-items: center;\n`;\n_c6 = BookingCodeInput;\nconst Input = styled.input`\n  flex: 1;\n  padding: 0.75rem;\n  border: none;\n  border-radius: 10px;\n  background: rgba(255, 255, 255, 0.9);\n  font-size: 1rem;\n  outline: none;\n  \n  &:focus {\n    box-shadow: 0 0 0 2px rgba(255, 255, 255, 0.3);\n  }\n`;\n_c7 = Input;\nconst ChatContainer = styled.div`\n  flex: 1;\n  background: rgba(255, 255, 255, 0.1);\n  backdrop-filter: blur(10px);\n  border-radius: 15px;\n  padding: 1rem;\n  margin-bottom: 1rem;\n  overflow-y: auto;\n  max-height: 60vh;\n  display: flex;\n  flex-direction: column;\n  gap: 0.5rem;\n`;\n_c8 = ChatContainer;\nconst MessageBubble = styled(motion.div)`\n  display: flex;\n  align-items: flex-start;\n  gap: 0.5rem;\n  justify-content: ${props => props.$isOwn ? 'flex-end' : 'flex-start'};\n`;\n_c9 = MessageBubble;\nconst MessageContent = styled.div`\n  background: ${props => props.$isOwn ? 'rgba(255, 255, 255, 0.9)' : 'rgba(255, 255, 255, 0.2)'};\n  color: ${props => props.$isOwn ? '#333' : 'white'};\n  padding: 0.75rem 1rem;\n  border-radius: 18px;\n  max-width: 70%;\n  word-break: break-word;\n  white-space: pre-wrap;\n  position: relative;\n  \n  ${props => props.$isOwn ? `\n    border-bottom-right-radius: 5px;\n  ` : `\n    border-bottom-left-radius: 5px;\n  `}\n`;\n_c0 = MessageContent;\nconst MessageTime = styled.div`\n  font-size: 0.7rem;\n  opacity: 0.7;\n  margin-top: 0.25rem;\n`;\n_c1 = MessageTime;\nconst Avatar = styled.div`\n  width: 32px;\n  height: 32px;\n  border-radius: 50%;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  background: ${props => {\n  switch (props.$type) {\n    case 'driver':\n      return 'rgba(255, 255, 255, 0.9)';\n    case 'passenger':\n      return 'rgba(255, 255, 255, 0.7)';\n    case 'ai':\n      return 'rgba(255, 255, 255, 0.8)';\n    default:\n      return 'rgba(255, 255, 255, 0.5)';\n  }\n}};\n  color: #333;\n  font-size: 0.8rem;\n  font-weight: bold;\n`;\n_c10 = Avatar;\nconst InputContainer = styled.div`\n  display: flex;\n  gap: 0.5rem;\n  align-items: center;\n  background: rgba(255, 255, 255, 0.1);\n  backdrop-filter: blur(10px);\n  border-radius: 25px;\n  padding: 0.5rem;\n`;\n_c11 = InputContainer;\nconst TextInput = styled.input`\n  flex: 1;\n  padding: 0.75rem 1rem;\n  border: none;\n  border-radius: 20px;\n  background: rgba(255, 255, 255, 0.9);\n  font-size: 1rem;\n  outline: none;\n  \n  &:focus {\n    box-shadow: 0 0 0 2px rgba(255, 255, 255, 0.3);\n  }\n`;\n_c12 = TextInput;\nconst Button = styled(motion.button)`\n  width: 44px;\n  height: 44px;\n  border: none;\n  border-radius: 50%;\n  background: rgba(255, 255, 255, 0.9);\n  color: #333;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  cursor: pointer;\n  font-size: 1.2rem;\n  transition: all 0.2s ease;\n  \n  &:hover {\n    background: rgba(255, 255, 255, 1);\n    transform: scale(1.05);\n  }\n  \n  &:active {\n    transform: scale(0.95);\n  }\n  \n  &:disabled {\n    opacity: 0.5;\n    cursor: not-allowed;\n  }\n`;\n_c13 = Button;\nconst VoiceButton = styled(Button)`\n  background: ${props => props.$isListening ? 'rgba(255, 100, 100, 0.9)' : 'rgba(255, 255, 255, 0.9)'};\n  color: ${props => props.$isListening ? 'white' : '#333'};\n`;\n_c14 = VoiceButton;\nconst StatusMessage = styled.div`\n  text-align: center;\n  color: white;\n  font-size: 0.9rem;\n  opacity: 0.8;\n  margin: 0.5rem 0;\n`;\n_c15 = StatusMessage;\nconst CallIndicator = styled.div`\n  display: flex;\n  align-items: center;\n  gap: 0.5rem;\n  background: rgba(255, 100, 100, 0.2);\n  padding: 0.5rem 1rem;\n  border-radius: 10px;\n  color: white;\n  font-size: 0.9rem;\n`;\n_c16 = CallIndicator;\nconst CallOverlay = styled(motion.div)`\n  position: fixed;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  background: rgba(0, 0, 0, 0.8);\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  z-index: 1000;\n`;\n_c17 = CallOverlay;\nconst CallCard = styled.div`\n  background: rgba(255, 255, 255, 0.95);\n  border-radius: 20px;\n  padding: 2rem;\n  text-align: center;\n  max-width: 400px;\n  width: 90%;\n`;\n_c18 = CallCard;\nconst CallStatus = styled.div`\n  font-size: 1.2rem;\n  font-weight: bold;\n  color: ${props => {\n  switch (props.$status) {\n    case 'calling':\n      return '#ff6b6b';\n    case 'ringing':\n      return '#4ecdc4';\n    case 'connected':\n      return '#45b7d1';\n    default:\n      return '#333';\n  }\n}};\n  margin-bottom: 1rem;\n`;\n_c19 = CallStatus;\nconst CallDuration = styled.div`\n  font-size: 1.5rem;\n  font-weight: bold;\n  color: #333;\n  margin: 1rem 0;\n`;\n_c20 = CallDuration;\nconst CallButtons = styled.div`\n  display: flex;\n  gap: 1rem;\n  justify-content: center;\n  margin-top: 1rem;\n`;\n_c21 = CallButtons;\nconst CallButton = styled.button`\n  width: 60px;\n  height: 60px;\n  border: none;\n  border-radius: 50%;\n  background: ${props => {\n  switch (props.$type) {\n    case 'accept':\n      return '#4ecdc4';\n    case 'reject':\n      return '#ff6b6b';\n    case 'end':\n      return '#ff6b6b';\n  }\n}};\n  color: white;\n  font-size: 1.5rem;\n  cursor: pointer;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  \n  &:hover {\n    transform: scale(1.1);\n  }\n`;\n\n// App Component\n_c22 = CallButton;\nconst App = () => {\n  _s();\n  const [bookingCode, setBookingCode] = useState('');\n  const [messages, setMessages] = useState([]);\n  const [inputText, setInputText] = useState('');\n  const [isListening, setIsListening] = useState(false);\n  const [isConnected, setIsConnected] = useState(false);\n  const [recognition, setRecognition] = useState(null);\n  const [statusMessage, setStatusMessage] = useState('');\n  const [callState, setCallState] = useState('idle');\n  const [callDuration, setCallDuration] = useState(0);\n  const chatContainerRef = useRef(null);\n  const inputRef = useRef(null);\n  const connectionRef = useRef({\n    isConnected: false,\n    bookingCode: ''\n  });\n  const websocketRef = useRef(null);\n  const timerRef = useRef(null);\n\n  // Initialize speech recognition\n  useEffect(() => {\n    const SpeechRecognition = window.SpeechRecognition || window.webkitSpeechRecognition;\n    if (SpeechRecognition) {\n      const recognition = new SpeechRecognition();\n      recognition.continuous = false;\n      recognition.interimResults = false;\n      recognition.lang = 'en-US';\n      recognition.onstart = () => {\n        setIsListening(true);\n        setStatusMessage('Listening...');\n      };\n      recognition.onend = () => {\n        setIsListening(false);\n        setStatusMessage('');\n      };\n      recognition.onerror = event => {\n        console.error('Speech recognition error:', event.error);\n        console.error('Error details:', event);\n        setIsListening(false);\n        setStatusMessage(`Voice recognition error: ${event.error}. Please try again.`);\n      };\n      recognition.onresult = event => {\n        console.log('Speech recognition result:', event);\n        console.log('Results length:', event.results.length);\n        if (event.results.length > 0) {\n          const result = event.results[0];\n          console.log('First result:', result);\n\n          // Try different ways to access transcript\n          let transcript = null;\n\n          // Method 1: Direct transcript property\n          if (result.transcript) {\n            transcript = result.transcript;\n            console.log('Found transcript via result.transcript');\n          }\n          // Method 2: Access via index if it's an array-like object\n          else if (result[0] && result[0].transcript) {\n            transcript = result[0].transcript;\n            console.log('Found transcript via result[0].transcript');\n          }\n          // Method 3: Try to access the first item\n          else if (typeof result.item === 'function') {\n            const firstItem = result.item(0);\n            if (firstItem && firstItem.transcript) {\n              transcript = firstItem.transcript;\n              console.log('Found transcript via result.item(0).transcript');\n            }\n          }\n          // Method 4: Try to iterate through results\n          else {\n            for (let i = 0; i < result.length; i++) {\n              const item = result[i];\n              if (item && item.transcript) {\n                transcript = item.transcript;\n                console.log(`Found transcript via result[${i}].transcript`);\n                break;\n              }\n            }\n          }\n          if (transcript) {\n            console.log('Voice transcript:', transcript);\n\n            // Check if connected before processing voice command\n            console.log('ðŸ” DEBUG: Connection check - isConnected:', connectionRef.current.isConnected, 'bookingCode:', connectionRef.current.bookingCode);\n            if (!connectionRef.current.isConnected || !connectionRef.current.bookingCode) {\n              console.log('âŒ DEBUG: Voice recognition triggered but not connected');\n              setStatusMessage('Please connect to a booking first by entering the booking code.');\n              return;\n            }\n            setStatusMessage('Processing voice command...');\n\n            // Use AI agent to process voice command with current booking code\n            processVoiceCommand(transcript);\n          } else {\n            console.log('No transcript found in any method');\n            console.log('Available properties:', Object.keys(result));\n            setStatusMessage('No speech detected. Please try again.');\n          }\n        } else {\n          console.log('No results in event');\n          setStatusMessage('No speech detected. Please try again.');\n        }\n      };\n      setRecognition(recognition);\n    } else {\n      setStatusMessage('Voice recognition not supported in this browser.');\n    }\n  }, []);\n\n  // Auto-scroll to bottom when new messages arrive\n  useEffect(() => {\n    if (chatContainerRef.current) {\n      chatContainerRef.current.scrollTop = chatContainerRef.current.scrollHeight;\n    }\n  }, [messages]);\n\n  // WebSocket connection for real-time call updates\n  useEffect(() => {\n    if (isConnected && bookingCode) {\n      const wsUrl = CONFIG.getWebsocketUrl().replace('ws://localhost:8000/ws', `ws://localhost:8000/ws/${bookingCode}`);\n      const ws = new WebSocket(wsUrl);\n      ws.onopen = () => {\n        console.log('ðŸ”Œ WebSocket connected for calls');\n      };\n      ws.onmessage = event => {\n        const data = JSON.parse(event.data);\n        console.log('ðŸ“¨ WebSocket message received:', data);\n        if (data.type === 'call_initiate' && data.from === 'passenger') {\n          // Incoming call from passenger\n          setCallState('ringing');\n          setStatusMessage('Incoming call from Passenger...');\n\n          // Add call log to messages if provided\n          if (data.call_log) {\n            const callMessage = {\n              id: `call_${Date.now()}`,\n              text: data.call_log.message,\n              sender: 'ai',\n              timestamp: data.call_log.timestamp,\n              type: 'call',\n              callDetails: {\n                duration: data.call_log.duration,\n                status: data.call_log.status\n              }\n            };\n            setMessages(prev => [...prev, callMessage]);\n          }\n        } else if (data.type === 'call_accept' && data.from === 'passenger') {\n          // Call accepted by passenger\n          setCallState('connected');\n          setStatusMessage('Call connected');\n          startCallTimer();\n\n          // Add call log to messages if provided\n          if (data.call_log) {\n            const callMessage = {\n              id: `call_${Date.now()}`,\n              text: data.call_log.message,\n              sender: 'ai',\n              timestamp: data.call_log.timestamp,\n              type: 'call',\n              callDetails: {\n                duration: data.call_log.duration,\n                status: data.call_log.status\n              }\n            };\n            setMessages(prev => [...prev, callMessage]);\n          }\n        } else if (data.type === 'call_reject' && data.from === 'passenger') {\n          // Call rejected by passenger\n          setCallState('ended');\n          setStatusMessage('Call rejected by Passenger');\n\n          // Add call log to messages if provided\n          if (data.call_log) {\n            const callMessage = {\n              id: `call_${Date.now()}`,\n              text: data.call_log.message,\n              sender: 'ai',\n              timestamp: data.call_log.timestamp,\n              type: 'call',\n              callDetails: {\n                duration: data.call_log.duration,\n                status: data.call_log.status\n              }\n            };\n            setMessages(prev => [...prev, callMessage]);\n          }\n          setTimeout(() => setCallState('idle'), 2000);\n        } else if (data.type === 'call_end' && data.from === 'passenger') {\n          // Call ended by passenger\n          setCallState('ended');\n          if (timerRef.current) {\n            clearInterval(timerRef.current);\n            timerRef.current = null;\n          }\n          setStatusMessage('Call ended by Passenger');\n\n          // Add call log to messages if provided\n          if (data.call_log) {\n            const callMessage = {\n              id: `call_${Date.now()}`,\n              text: data.call_log.message,\n              sender: 'ai',\n              timestamp: data.call_log.timestamp,\n              type: 'call',\n              callDetails: {\n                duration: data.call_log.duration,\n                status: data.call_log.status\n              }\n            };\n            setMessages(prev => [...prev, callMessage]);\n          }\n          setTimeout(() => {\n            setCallState('idle');\n            setCallDuration(0);\n          }, 2000);\n        }\n      };\n      ws.onerror = error => {\n        console.error('WebSocket error:', error);\n      };\n      ws.onclose = () => {\n        console.log('WebSocket disconnected');\n      };\n      websocketRef.current = ws;\n      return () => {\n        ws.close();\n      };\n    }\n  }, [isConnected, bookingCode]);\n\n  // Cleanup timers on unmount\n  useEffect(() => {\n    return () => {\n      if (timerRef.current) {\n        clearInterval(timerRef.current);\n        timerRef.current = null;\n      }\n    };\n  }, []);\n\n  // Connect to booking\n  const connectToBooking = async () => {\n    if (!(bookingCode || '').trim()) {\n      setStatusMessage('Please enter a booking code.');\n      return;\n    }\n    try {\n      setStatusMessage('Connecting to booking...');\n\n      // Test connection by getting messages\n      const response = await axios.get(`${API_ENDPOINTS.GET_MESSAGES}/${bookingCode}`);\n      if (response.data.success) {\n        setIsConnected(true);\n        setMessages(response.data.data.messages || []);\n        setStatusMessage('Connected successfully!');\n\n        // Update connection ref\n        connectionRef.current = {\n          isConnected: true,\n          bookingCode: bookingCode\n        };\n\n        // Add welcome message\n        const welcomeMessage = {\n          id: Date.now().toString(),\n          text: `Welcome to booking ${bookingCode}! How can I help you today?`,\n          sender: 'ai',\n          timestamp: new Date().toISOString(),\n          type: 'text'\n        };\n        setMessages(prev => [...prev, welcomeMessage]);\n      }\n    } catch (error) {\n      console.error('Connection error:', error);\n      setStatusMessage('Failed to connect. Please check your booking code.');\n    }\n  };\n\n  // Send message\n  const sendMessage = async () => {\n    console.log('Send message called with inputText:', inputText);\n    if (!(inputText || '').trim() || !isConnected) {\n      console.log('Send message blocked - inputText:', inputText, 'isConnected:', isConnected);\n      return;\n    }\n    const newMessage = {\n      id: Date.now().toString(),\n      text: inputText,\n      sender: 'driver',\n      timestamp: new Date().toISOString(),\n      type: 'text'\n    };\n    console.log('Adding message to UI:', newMessage);\n    setMessages(prev => [...prev, newMessage]);\n    setInputText('');\n    setStatusMessage('Sending message...');\n    try {\n      const response = await axios.post(API_ENDPOINTS.SEND_MESSAGE, {\n        booking_code: bookingCode,\n        message: inputText,\n        sender: 'driver'\n      });\n      if (response.data.success) {\n        setStatusMessage('Message sent successfully!');\n\n        // Add AI response\n        const aiResponse = {\n          id: (Date.now() + 1).toString(),\n          text: 'Message sent successfully. The passenger will be notified.',\n          sender: 'ai',\n          timestamp: new Date().toISOString(),\n          type: 'text'\n        };\n        setMessages(prev => [...prev, aiResponse]);\n      }\n    } catch (error) {\n      console.error('Send message error:', error);\n      setStatusMessage('Failed to send message. Please try again.');\n    }\n  };\n\n  // Make call\n  const makeCall = async () => {\n    if (!isConnected) return;\n    setStatusMessage('Initiating call...');\n    try {\n      const response = await axios.post(API_ENDPOINTS.MAKE_CALL, {\n        booking_code: bookingCode,\n        call_type: 'voice',\n        duration: 0\n      });\n      if (response.data.success) {\n        const callMessage = {\n          id: Date.now().toString(),\n          text: 'Call initiated successfully',\n          sender: 'ai',\n          timestamp: new Date().toISOString(),\n          type: 'call',\n          callDetails: {\n            duration: 0,\n            status: 'initiated'\n          }\n        };\n        setMessages(prev => [...prev, callMessage]);\n        setStatusMessage('Call initiated!');\n      }\n    } catch (error) {\n      console.error('Make call error:', error);\n      setStatusMessage('Failed to initiate call. Please try again.');\n    }\n  };\n\n  // Start voice recognition\n  const startListening = () => {\n    if (!isConnected || !bookingCode) {\n      setStatusMessage('Please connect to a booking first by entering the booking code.');\n      return;\n    }\n    if (recognition && !isListening) {\n      recognition.start();\n    }\n  };\n\n  // Process voice command using AI agent\n  const processVoiceCommand = async transcript => {\n    console.log('ðŸ” DEBUG: processVoiceCommand called with:', transcript);\n    console.log('ðŸ” DEBUG: isConnected:', connectionRef.current.isConnected, 'bookingCode:', connectionRef.current.bookingCode);\n\n    // Only process voice commands if already connected\n    if (!connectionRef.current.isConnected || !connectionRef.current.bookingCode) {\n      console.log('âŒ DEBUG: Not connected to booking');\n      setStatusMessage('Please connect to a booking first by entering the booking code.');\n      return;\n    }\n\n    // If connected, process with AI\n    await processVoiceCommandWithAI(transcript, connectionRef.current.bookingCode);\n  };\n\n  // Helper function to process voice command with AI\n  const processVoiceCommandWithAI = async (transcript, bookingCode) => {\n    try {\n      console.log('ðŸš€ DEBUG: Sending to AI agent endpoint:', API_ENDPOINTS.AI_AGENT);\n      console.log('ðŸ“¤ DEBUG: Request payload:', {\n        booking_code: bookingCode,\n        user_input: transcript,\n        user_type: 'driver'\n      });\n      const response = await axios.post(API_ENDPOINTS.AI_AGENT, {\n        booking_code: bookingCode,\n        user_input: transcript,\n        user_type: 'driver'\n      });\n      console.log('ðŸ“¥ DEBUG: AI agent response:', response.data);\n      if (response.data.success) {\n        console.log('âœ… DEBUG: AI agent success');\n        console.log('ðŸ“ DEBUG: Original transcript:', transcript);\n        console.log('ðŸ“ DEBUG: Extracted message:', response.data.data.text);\n\n        // Check if this is a call command\n        if (response.data.data.type === 'call') {\n          console.log('ðŸ“ž DEBUG: Call command detected');\n          handleCallCommand();\n        } else {\n          // Add AI response to chat\n          const aiMessage = {\n            id: Date.now().toString(),\n            text: `AI processed: \"${transcript}\" â†’ \"${response.data.data.text}\"`,\n            sender: 'ai',\n            timestamp: new Date().toISOString(),\n            type: 'text'\n          };\n          console.log('ðŸ’¬ DEBUG: Adding AI message to chat:', aiMessage);\n          setMessages(prev => [...prev, aiMessage]);\n          setStatusMessage('Voice command processed successfully!');\n        }\n      } else {\n        console.log('âŒ DEBUG: AI agent returned success: false');\n      }\n    } catch (error) {\n      var _error$response, _error$response2;\n      console.error('ðŸ’¥ DEBUG: AI agent error:', error);\n      console.error('ðŸ’¥ DEBUG: Error details:', {\n        message: error.message,\n        response: (_error$response = error.response) === null || _error$response === void 0 ? void 0 : _error$response.data,\n        status: (_error$response2 = error.response) === null || _error$response2 === void 0 ? void 0 : _error$response2.status\n      });\n      setStatusMessage('Failed to process voice command. Please try again.');\n    }\n  };\n\n  // Handle call command\n  const handleCallCommand = () => {\n    // Reset call state and duration\n    setCallState('calling');\n    setCallDuration(0);\n    setStatusMessage('Initiating call...');\n\n    // Send call initiation via WebSocket\n    if (websocketRef.current && websocketRef.current.readyState === WebSocket.OPEN) {\n      websocketRef.current.send(JSON.stringify({\n        type: 'call_initiate',\n        from: 'driver',\n        booking_code: bookingCode\n      }));\n    }\n\n    // Simulate call flow with delays\n    setTimeout(() => {\n      setCallState('ringing');\n      setStatusMessage('Calling passenger...');\n    }, 2000); // 2 second delay before ringing\n  };\n\n  // Start call timer\n  const startCallTimer = () => {\n    // Clear any existing timer\n    if (timerRef.current) {\n      clearInterval(timerRef.current);\n    }\n\n    // Reset duration\n    setCallDuration(0);\n    const interval = setInterval(() => {\n      setCallDuration(prev => prev + 1);\n    }, 1000);\n\n    // Store interval ID for cleanup\n    timerRef.current = interval;\n    return () => clearInterval(interval);\n  };\n\n  // End call\n  const endCall = () => {\n    // Clear timer\n    if (timerRef.current) {\n      clearInterval(timerRef.current);\n      timerRef.current = null;\n    }\n    setCallState('ended');\n    setStatusMessage(`Call ended - Duration: ${callDuration} seconds`);\n\n    // Send call end via WebSocket with duration\n    if (websocketRef.current && websocketRef.current.readyState === WebSocket.OPEN) {\n      websocketRef.current.send(JSON.stringify({\n        type: 'call_end',\n        from: 'driver',\n        booking_code: bookingCode,\n        duration: callDuration\n      }));\n    }\n    setTimeout(() => {\n      setCallState('idle');\n      setCallDuration(0);\n    }, 2000);\n  };\n\n  // Accept call\n  const acceptCall = () => {\n    setCallState('connected');\n    setStatusMessage('Call accepted');\n    startCallTimer();\n\n    // Send call acceptance via WebSocket\n    if (websocketRef.current && websocketRef.current.readyState === WebSocket.OPEN) {\n      websocketRef.current.send(JSON.stringify({\n        type: 'call_accept',\n        from: 'driver',\n        booking_code: bookingCode\n      }));\n    }\n  };\n\n  // Reject call\n  const rejectCall = () => {\n    setCallState('ended');\n    setStatusMessage('Call rejected');\n\n    // Send call rejection via WebSocket\n    if (websocketRef.current && websocketRef.current.readyState === WebSocket.OPEN) {\n      websocketRef.current.send(JSON.stringify({\n        type: 'call_reject',\n        from: 'driver',\n        booking_code: bookingCode\n      }));\n    }\n    setTimeout(() => {\n      setCallState('idle');\n      setCallDuration(0);\n    }, 2000);\n  };\n\n  // Handle key press\n  const handleKeyPress = e => {\n    if (e.key === 'Enter' && !e.shiftKey) {\n      e.preventDefault();\n      sendMessage();\n    }\n  };\n\n  // Poll for new messages\n  useEffect(() => {\n    if (!isConnected || !bookingCode) return;\n    const pollInterval = setInterval(async () => {\n      try {\n        const response = await axios.get(`${API_ENDPOINTS.GET_MESSAGES}/${bookingCode}`);\n        if (response.data.success) {\n          const newMessages = response.data.data.messages || [];\n          setMessages(newMessages);\n        }\n      } catch (error) {\n        console.error('Polling error:', error);\n      }\n    }, 3000); // Poll every 3 seconds\n\n    return () => clearInterval(pollInterval);\n  }, [isConnected, bookingCode]);\n  return /*#__PURE__*/_jsxDEV(AppContainer, {\n    children: [/*#__PURE__*/_jsxDEV(Header, {\n      children: [/*#__PURE__*/_jsxDEV(Title, {\n        children: \"DAX - Driver Assistant\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 944,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Subtitle, {\n        children: \"AI-powered chat and voice assistant\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 945,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 943,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(MainContent, {\n      children: [!isConnected ? /*#__PURE__*/_jsxDEV(BookingCodeInput, {\n        children: [/*#__PURE__*/_jsxDEV(Input, {\n          type: \"text\",\n          placeholder: \"Enter booking code...\",\n          value: bookingCode,\n          onChange: e => setBookingCode(e.target.value),\n          onKeyPress: e => e.key === 'Enter' && connectToBooking()\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 951,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(Button, {\n          whileHover: {\n            scale: 1.05\n          },\n          whileTap: {\n            scale: 0.95\n          },\n          onClick: connectToBooking,\n          children: \"Connect\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 958,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 950,\n        columnNumber: 11\n      }, this) : /*#__PURE__*/_jsxDEV(_Fragment, {\n        children: [/*#__PURE__*/_jsxDEV(ChatContainer, {\n          ref: chatContainerRef,\n          children: /*#__PURE__*/_jsxDEV(AnimatePresence, {\n            children: messages.map(message => /*#__PURE__*/_jsxDEV(MessageBubble, {\n              $isOwn: message.sender === 'driver',\n              initial: {\n                opacity: 0,\n                y: 20\n              },\n              animate: {\n                opacity: 1,\n                y: 0\n              },\n              exit: {\n                opacity: 0,\n                y: -20\n              },\n              transition: {\n                duration: 0.3\n              },\n              children: [message.sender !== 'driver' && /*#__PURE__*/_jsxDEV(Avatar, {\n                $type: message.sender,\n                children: message.sender === 'passenger' ? /*#__PURE__*/_jsxDEV(FaUser, {}, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 981,\n                  columnNumber: 59\n                }, this) : /*#__PURE__*/_jsxDEV(FaCar, {}, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 981,\n                  columnNumber: 72\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 980,\n                columnNumber: 23\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                children: [/*#__PURE__*/_jsxDEV(MessageContent, {\n                  $isOwn: message.sender === 'driver',\n                  children: message.type === 'call' ? /*#__PURE__*/_jsxDEV(CallIndicator, {\n                    children: [/*#__PURE__*/_jsxDEV(FaPhone, {}, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 988,\n                      columnNumber: 29\n                    }, this), message.text]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 987,\n                    columnNumber: 27\n                  }, this) : message.text\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 985,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(MessageTime, {\n                  children: new Date(message.timestamp).toLocaleTimeString()\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 995,\n                  columnNumber: 23\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 984,\n                columnNumber: 21\n              }, this), message.sender === 'driver' && /*#__PURE__*/_jsxDEV(Avatar, {\n                $type: message.sender,\n                children: /*#__PURE__*/_jsxDEV(FaCar, {}, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1001,\n                  columnNumber: 25\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1000,\n                columnNumber: 23\n              }, this)]\n            }, message.id, true, {\n              fileName: _jsxFileName,\n              lineNumber: 971,\n              columnNumber: 19\n            }, this))\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 969,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 968,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(InputContainer, {\n          children: [/*#__PURE__*/_jsxDEV(TextInput, {\n            ref: inputRef,\n            type: \"text\",\n            placeholder: \"Type a message or use voice...\",\n            value: inputText || '',\n            onChange: e => setInputText(e.target.value || ''),\n            onKeyPress: handleKeyPress,\n            disabled: !isConnected\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1010,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(VoiceButton, {\n            $isListening: isListening,\n            whileHover: {\n              scale: 1.05\n            },\n            whileTap: {\n              scale: 0.95\n            },\n            onClick: startListening,\n            disabled: !isConnected || isListening,\n            children: isListening ? /*#__PURE__*/_jsxDEV(FaMicrophoneSlash, {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1026,\n              columnNumber: 32\n            }, this) : /*#__PURE__*/_jsxDEV(FaMicrophone, {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1026,\n              columnNumber: 56\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1019,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(Button, {\n            whileHover: {\n              scale: 1.05\n            },\n            whileTap: {\n              scale: 0.95\n            },\n            onClick: sendMessage,\n            disabled: !(inputText || '').trim() || !isConnected,\n            children: /*#__PURE__*/_jsxDEV(FaPaperPlane, {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1034,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1028,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(Button, {\n            whileHover: {\n              scale: 1.05\n            },\n            whileTap: {\n              scale: 0.95\n            },\n            onClick: makeCall,\n            disabled: !isConnected,\n            children: /*#__PURE__*/_jsxDEV(FaPhone, {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1042,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1036,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 1009,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true), statusMessage && /*#__PURE__*/_jsxDEV(StatusMessage, {\n        children: statusMessage\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 1049,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 948,\n      columnNumber: 7\n    }, this), callState !== 'idle' && /*#__PURE__*/_jsxDEV(CallOverlay, {\n      initial: {\n        opacity: 0\n      },\n      animate: {\n        opacity: 1\n      },\n      exit: {\n        opacity: 0\n      },\n      children: /*#__PURE__*/_jsxDEV(CallCard, {\n        children: [/*#__PURE__*/_jsxDEV(CallStatus, {\n          $status: callState,\n          children: [callState === 'calling' && 'Calling...', callState === 'ringing' && 'Ringing...', callState === 'connected' && 'Connected', callState === 'ended' && 'Call Ended']\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 1061,\n          columnNumber: 13\n        }, this), callState === 'connected' && /*#__PURE__*/_jsxDEV(CallDuration, {\n          children: [Math.floor(callDuration / 60), \":\", (callDuration % 60).toString().padStart(2, '0')]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 1069,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(CallButtons, {\n          children: [callState === 'ringing' && /*#__PURE__*/_jsxDEV(_Fragment, {\n            children: [/*#__PURE__*/_jsxDEV(CallButton, {\n              $type: \"accept\",\n              onClick: acceptCall,\n              children: /*#__PURE__*/_jsxDEV(FaPhone, {}, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1078,\n                columnNumber: 21\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1077,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(CallButton, {\n              $type: \"reject\",\n              onClick: rejectCall,\n              children: /*#__PURE__*/_jsxDEV(FaMicrophoneSlash, {}, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1081,\n                columnNumber: 21\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1080,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true), callState === 'connected' && /*#__PURE__*/_jsxDEV(CallButton, {\n            $type: \"end\",\n            onClick: endCall,\n            children: /*#__PURE__*/_jsxDEV(FaMicrophoneSlash, {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1087,\n              columnNumber: 19\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1086,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 1074,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 1060,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 1055,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 942,\n    columnNumber: 5\n  }, this);\n};\n_s(App, \"H21KUOYR6zjr07BCV+uHOvTwwSE=\");\n_c23 = App;\nexport default App;\nvar _c, _c2, _c3, _c4, _c5, _c6, _c7, _c8, _c9, _c0, _c1, _c10, _c11, _c12, _c13, _c14, _c15, _c16, _c17, _c18, _c19, _c20, _c21, _c22, _c23;\n$RefreshReg$(_c, \"AppContainer\");\n$RefreshReg$(_c2, \"Header\");\n$RefreshReg$(_c3, \"Title\");\n$RefreshReg$(_c4, \"Subtitle\");\n$RefreshReg$(_c5, \"MainContent\");\n$RefreshReg$(_c6, \"BookingCodeInput\");\n$RefreshReg$(_c7, \"Input\");\n$RefreshReg$(_c8, \"ChatContainer\");\n$RefreshReg$(_c9, \"MessageBubble\");\n$RefreshReg$(_c0, \"MessageContent\");\n$RefreshReg$(_c1, \"MessageTime\");\n$RefreshReg$(_c10, \"Avatar\");\n$RefreshReg$(_c11, \"InputContainer\");\n$RefreshReg$(_c12, \"TextInput\");\n$RefreshReg$(_c13, \"Button\");\n$RefreshReg$(_c14, \"VoiceButton\");\n$RefreshReg$(_c15, \"StatusMessage\");\n$RefreshReg$(_c16, \"CallIndicator\");\n$RefreshReg$(_c17, \"CallOverlay\");\n$RefreshReg$(_c18, \"CallCard\");\n$RefreshReg$(_c19, \"CallStatus\");\n$RefreshReg$(_c20, \"CallDuration\");\n$RefreshReg$(_c21, \"CallButtons\");\n$RefreshReg$(_c22, \"CallButton\");\n$RefreshReg$(_c23, \"App\");","map":{"version":3,"names":["React","useState","useEffect","useRef","styled","motion","AnimatePresence","FaMicrophone","FaMicrophoneSlash","FaPaperPlane","FaPhone","FaUser","FaCar","axios","API_ENDPOINTS","CONFIG","jsxDEV","_jsxDEV","Fragment","_Fragment","AppContainer","div","_c","Header","header","_c2","Title","h1","_c3","Subtitle","p","_c4","MainContent","main","_c5","BookingCodeInput","_c6","Input","input","_c7","ChatContainer","_c8","MessageBubble","props","$isOwn","_c9","MessageContent","_c0","MessageTime","_c1","Avatar","$type","_c10","InputContainer","_c11","TextInput","_c12","Button","button","_c13","VoiceButton","$isListening","_c14","StatusMessage","_c15","CallIndicator","_c16","CallOverlay","_c17","CallCard","_c18","CallStatus","$status","_c19","CallDuration","_c20","CallButtons","_c21","CallButton","_c22","App","_s","bookingCode","setBookingCode","messages","setMessages","inputText","setInputText","isListening","setIsListening","isConnected","setIsConnected","recognition","setRecognition","statusMessage","setStatusMessage","callState","setCallState","callDuration","setCallDuration","chatContainerRef","inputRef","connectionRef","websocketRef","timerRef","SpeechRecognition","window","webkitSpeechRecognition","continuous","interimResults","lang","onstart","onend","onerror","event","console","error","onresult","log","results","length","result","transcript","item","firstItem","i","current","processVoiceCommand","Object","keys","scrollTop","scrollHeight","wsUrl","getWebsocketUrl","replace","ws","WebSocket","onopen","onmessage","data","JSON","parse","type","from","call_log","callMessage","id","Date","now","text","message","sender","timestamp","callDetails","duration","status","prev","startCallTimer","setTimeout","clearInterval","onclose","close","connectToBooking","trim","response","get","GET_MESSAGES","success","welcomeMessage","toString","toISOString","sendMessage","newMessage","post","SEND_MESSAGE","booking_code","aiResponse","makeCall","MAKE_CALL","call_type","startListening","start","processVoiceCommandWithAI","AI_AGENT","user_input","user_type","handleCallCommand","aiMessage","_error$response","_error$response2","readyState","OPEN","send","stringify","interval","setInterval","endCall","acceptCall","rejectCall","handleKeyPress","e","key","shiftKey","preventDefault","pollInterval","newMessages","children","fileName","_jsxFileName","lineNumber","columnNumber","placeholder","value","onChange","target","onKeyPress","whileHover","scale","whileTap","onClick","ref","map","initial","opacity","y","animate","exit","transition","toLocaleTimeString","disabled","Math","floor","padStart","_c23","$RefreshReg$"],"sources":["/Users/sameer.jha/Python_Projects/NavieTakieSimulation/frontend/dax-app/src/App.tsx"],"sourcesContent":["import React, { useState, useEffect, useRef } from 'react';\nimport styled from 'styled-components';\nimport { motion, AnimatePresence } from 'framer-motion';\nimport { \n  FaMicrophone, \n  FaMicrophoneSlash, \n  FaPaperPlane, \n  FaPhone,\n  FaUser,\n  FaCar\n} from 'react-icons/fa';\nimport axios from 'axios';\nimport { API_ENDPOINTS, CONFIG } from './config';\n\n// Types\ninterface Message {\n  id: string;\n  text: string;\n  sender: 'driver' | 'passenger' | 'ai';\n  timestamp: string;\n  type: 'text' | 'call';\n  callDetails?: {\n    duration: number;\n    status: string;\n  };\n}\n\ninterface SpeechRecognitionErrorEvent extends Event {\n  error: string;\n  message: string;\n}\n\ninterface SpeechRecognitionResult {\n  transcript: string;\n  confidence: number;\n}\n\ninterface SpeechRecognitionResultList {\n  length: number;\n  item(index: number): SpeechRecognitionResult;\n  [index: number]: SpeechRecognitionResult;\n}\n\ninterface SpeechRecognitionEvent extends Event {\n  resultIndex: number;\n  results: SpeechRecognitionResultList;\n}\n\ninterface VoiceRecognition extends EventTarget {\n  start(): void;\n  stop(): void;\n  abort(): void;\n  continuous: boolean;\n  interimResults: boolean;\n  lang: string;\n  onstart: ((this: VoiceRecognition, ev: Event) => any) | null;\n  onend: ((this: VoiceRecognition, ev: Event) => any) | null;\n  onerror: ((this: VoiceRecognition, ev: SpeechRecognitionErrorEvent) => any) | null;\n  onresult: ((this: VoiceRecognition, ev: SpeechRecognitionEvent) => any) | null;\n}\n\ndeclare global {\n  interface Window {\n    SpeechRecognition: new () => VoiceRecognition;\n    webkitSpeechRecognition: new () => VoiceRecognition;\n  }\n}\n\n// Styled Components\nconst AppContainer = styled.div`\n  min-height: 100vh;\n  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);\n  display: flex;\n  flex-direction: column;\n`;\n\nconst Header = styled.header`\n  background: rgba(255, 255, 255, 0.1);\n  backdrop-filter: blur(10px);\n  padding: 1rem;\n  text-align: center;\n  color: white;\n  box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);\n`;\n\nconst Title = styled.h1`\n  margin: 0;\n  font-size: 1.5rem;\n  font-weight: 600;\n`;\n\nconst Subtitle = styled.p`\n  margin: 0.5rem 0 0 0;\n  font-size: 0.9rem;\n  opacity: 0.8;\n`;\n\nconst MainContent = styled.main`\n  flex: 1;\n  display: flex;\n  flex-direction: column;\n  max-width: 600px;\n  margin: 0 auto;\n  width: 100%;\n  padding: 1rem;\n`;\n\nconst BookingCodeInput = styled.div`\n  background: rgba(255, 255, 255, 0.1);\n  backdrop-filter: blur(10px);\n  border-radius: 15px;\n  padding: 1rem;\n  margin-bottom: 1rem;\n  display: flex;\n  gap: 0.5rem;\n  align-items: center;\n`;\n\nconst Input = styled.input`\n  flex: 1;\n  padding: 0.75rem;\n  border: none;\n  border-radius: 10px;\n  background: rgba(255, 255, 255, 0.9);\n  font-size: 1rem;\n  outline: none;\n  \n  &:focus {\n    box-shadow: 0 0 0 2px rgba(255, 255, 255, 0.3);\n  }\n`;\n\nconst ChatContainer = styled.div`\n  flex: 1;\n  background: rgba(255, 255, 255, 0.1);\n  backdrop-filter: blur(10px);\n  border-radius: 15px;\n  padding: 1rem;\n  margin-bottom: 1rem;\n  overflow-y: auto;\n  max-height: 60vh;\n  display: flex;\n  flex-direction: column;\n  gap: 0.5rem;\n`;\n\nconst MessageBubble = styled(motion.div)<{ $isOwn: boolean }>`\n  display: flex;\n  align-items: flex-start;\n  gap: 0.5rem;\n  justify-content: ${props => props.$isOwn ? 'flex-end' : 'flex-start'};\n`;\n\nconst MessageContent = styled.div<{ $isOwn: boolean }>`\n  background: ${props => props.$isOwn ? 'rgba(255, 255, 255, 0.9)' : 'rgba(255, 255, 255, 0.2)'};\n  color: ${props => props.$isOwn ? '#333' : 'white'};\n  padding: 0.75rem 1rem;\n  border-radius: 18px;\n  max-width: 70%;\n  word-break: break-word;\n  white-space: pre-wrap;\n  position: relative;\n  \n  ${props => props.$isOwn ? `\n    border-bottom-right-radius: 5px;\n  ` : `\n    border-bottom-left-radius: 5px;\n  `}\n`;\n\nconst MessageTime = styled.div`\n  font-size: 0.7rem;\n  opacity: 0.7;\n  margin-top: 0.25rem;\n`;\n\nconst Avatar = styled.div<{ $type: 'driver' | 'passenger' | 'ai' }>`\n  width: 32px;\n  height: 32px;\n  border-radius: 50%;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  background: ${props => {\n    switch (props.$type) {\n      case 'driver': return 'rgba(255, 255, 255, 0.9)';\n      case 'passenger': return 'rgba(255, 255, 255, 0.7)';\n      case 'ai': return 'rgba(255, 255, 255, 0.8)';\n      default: return 'rgba(255, 255, 255, 0.5)';\n    }\n  }};\n  color: #333;\n  font-size: 0.8rem;\n  font-weight: bold;\n`;\n\nconst InputContainer = styled.div`\n  display: flex;\n  gap: 0.5rem;\n  align-items: center;\n  background: rgba(255, 255, 255, 0.1);\n  backdrop-filter: blur(10px);\n  border-radius: 25px;\n  padding: 0.5rem;\n`;\n\nconst TextInput = styled.input`\n  flex: 1;\n  padding: 0.75rem 1rem;\n  border: none;\n  border-radius: 20px;\n  background: rgba(255, 255, 255, 0.9);\n  font-size: 1rem;\n  outline: none;\n  \n  &:focus {\n    box-shadow: 0 0 0 2px rgba(255, 255, 255, 0.3);\n  }\n`;\n\nconst Button = styled(motion.button)`\n  width: 44px;\n  height: 44px;\n  border: none;\n  border-radius: 50%;\n  background: rgba(255, 255, 255, 0.9);\n  color: #333;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  cursor: pointer;\n  font-size: 1.2rem;\n  transition: all 0.2s ease;\n  \n  &:hover {\n    background: rgba(255, 255, 255, 1);\n    transform: scale(1.05);\n  }\n  \n  &:active {\n    transform: scale(0.95);\n  }\n  \n  &:disabled {\n    opacity: 0.5;\n    cursor: not-allowed;\n  }\n`;\n\nconst VoiceButton = styled(Button)<{ $isListening: boolean }>`\n  background: ${props => props.$isListening ? 'rgba(255, 100, 100, 0.9)' : 'rgba(255, 255, 255, 0.9)'};\n  color: ${props => props.$isListening ? 'white' : '#333'};\n`;\n\nconst StatusMessage = styled.div`\n  text-align: center;\n  color: white;\n  font-size: 0.9rem;\n  opacity: 0.8;\n  margin: 0.5rem 0;\n`;\n\nconst CallIndicator = styled.div`\n  display: flex;\n  align-items: center;\n  gap: 0.5rem;\n  background: rgba(255, 100, 100, 0.2);\n  padding: 0.5rem 1rem;\n  border-radius: 10px;\n  color: white;\n  font-size: 0.9rem;\n`;\n\nconst CallOverlay = styled(motion.div)`\n  position: fixed;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  background: rgba(0, 0, 0, 0.8);\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  z-index: 1000;\n`;\n\nconst CallCard = styled.div`\n  background: rgba(255, 255, 255, 0.95);\n  border-radius: 20px;\n  padding: 2rem;\n  text-align: center;\n  max-width: 400px;\n  width: 90%;\n`;\n\nconst CallStatus = styled.div<{ $status: string }>`\n  font-size: 1.2rem;\n  font-weight: bold;\n  color: ${props => {\n    switch (props.$status) {\n      case 'calling': return '#ff6b6b';\n      case 'ringing': return '#4ecdc4';\n      case 'connected': return '#45b7d1';\n      default: return '#333';\n    }\n  }};\n  margin-bottom: 1rem;\n`;\n\nconst CallDuration = styled.div`\n  font-size: 1.5rem;\n  font-weight: bold;\n  color: #333;\n  margin: 1rem 0;\n`;\n\nconst CallButtons = styled.div`\n  display: flex;\n  gap: 1rem;\n  justify-content: center;\n  margin-top: 1rem;\n`;\n\nconst CallButton = styled.button<{ $type: 'accept' | 'reject' | 'end' }>`\n  width: 60px;\n  height: 60px;\n  border: none;\n  border-radius: 50%;\n  background: ${props => {\n    switch (props.$type) {\n      case 'accept': return '#4ecdc4';\n      case 'reject': return '#ff6b6b';\n      case 'end': return '#ff6b6b';\n    }\n  }};\n  color: white;\n  font-size: 1.5rem;\n  cursor: pointer;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  \n  &:hover {\n    transform: scale(1.1);\n  }\n`;\n\n// App Component\nconst App: React.FC = () => {\n  const [bookingCode, setBookingCode] = useState('');\n  const [messages, setMessages] = useState<Message[]>([]);\n  const [inputText, setInputText] = useState<string>('');\n  const [isListening, setIsListening] = useState(false);\n  const [isConnected, setIsConnected] = useState(false);\n  const [recognition, setRecognition] = useState<VoiceRecognition | null>(null);\n  const [statusMessage, setStatusMessage] = useState('');\n  const [callState, setCallState] = useState<'idle' | 'calling' | 'ringing' | 'connected' | 'ended'>('idle');\n  const [callDuration, setCallDuration] = useState(0);\n  \n  const chatContainerRef = useRef<HTMLDivElement>(null);\n  const inputRef = useRef<HTMLInputElement>(null);\n  const connectionRef = useRef({ isConnected: false, bookingCode: '' });\n  const websocketRef = useRef<WebSocket | null>(null);\n  const timerRef = useRef<NodeJS.Timeout | null>(null);\n\n  // Initialize speech recognition\n  useEffect(() => {\n    const SpeechRecognition = window.SpeechRecognition || window.webkitSpeechRecognition;\n    if (SpeechRecognition) {\n      const recognition = new SpeechRecognition();\n      recognition.continuous = false;\n      recognition.interimResults = false;\n      recognition.lang = 'en-US';\n      \n      recognition.onstart = () => {\n        setIsListening(true);\n        setStatusMessage('Listening...');\n      };\n      \n      recognition.onend = () => {\n        setIsListening(false);\n        setStatusMessage('');\n      };\n      \n      recognition.onerror = (event) => {\n        console.error('Speech recognition error:', event.error);\n        console.error('Error details:', event);\n        setIsListening(false);\n        setStatusMessage(`Voice recognition error: ${event.error}. Please try again.`);\n      };\n      \n      recognition.onresult = (event) => {\n        console.log('Speech recognition result:', event);\n        console.log('Results length:', event.results.length);\n        \n        if (event.results.length > 0) {\n          const result = event.results[0];\n          console.log('First result:', result);\n          \n          // Try different ways to access transcript\n          let transcript = null;\n          \n          // Method 1: Direct transcript property\n          if (result.transcript) {\n            transcript = result.transcript;\n            console.log('Found transcript via result.transcript');\n          }\n          // Method 2: Access via index if it's an array-like object\n          else if ((result as any)[0] && (result as any)[0].transcript) {\n            transcript = (result as any)[0].transcript;\n            console.log('Found transcript via result[0].transcript');\n          }\n          // Method 3: Try to access the first item\n          else if (typeof (result as any).item === 'function') {\n            const firstItem = (result as any).item(0);\n            if (firstItem && firstItem.transcript) {\n              transcript = firstItem.transcript;\n              console.log('Found transcript via result.item(0).transcript');\n            }\n          }\n          // Method 4: Try to iterate through results\n          else {\n            for (let i = 0; i < (result as any).length; i++) {\n              const item = (result as any)[i];\n              if (item && item.transcript) {\n                transcript = item.transcript;\n                console.log(`Found transcript via result[${i}].transcript`);\n                break;\n              }\n            }\n          }\n          \n          if (transcript) {\n            console.log('Voice transcript:', transcript);\n            \n            // Check if connected before processing voice command\n            console.log('ðŸ” DEBUG: Connection check - isConnected:', connectionRef.current.isConnected, 'bookingCode:', connectionRef.current.bookingCode);\n            if (!connectionRef.current.isConnected || !connectionRef.current.bookingCode) {\n              console.log('âŒ DEBUG: Voice recognition triggered but not connected');\n              setStatusMessage('Please connect to a booking first by entering the booking code.');\n              return;\n            }\n            \n            setStatusMessage('Processing voice command...');\n            \n            // Use AI agent to process voice command with current booking code\n            processVoiceCommand(transcript);\n          } else {\n            console.log('No transcript found in any method');\n            console.log('Available properties:', Object.keys(result));\n            setStatusMessage('No speech detected. Please try again.');\n          }\n        } else {\n          console.log('No results in event');\n          setStatusMessage('No speech detected. Please try again.');\n        }\n      };\n      \n      setRecognition(recognition);\n    } else {\n      setStatusMessage('Voice recognition not supported in this browser.');\n    }\n  }, []);\n\n  // Auto-scroll to bottom when new messages arrive\n  useEffect(() => {\n    if (chatContainerRef.current) {\n      chatContainerRef.current.scrollTop = chatContainerRef.current.scrollHeight;\n    }\n  }, [messages]);\n\n  // WebSocket connection for real-time call updates\n  useEffect(() => {\n    if (isConnected && bookingCode) {\n      const wsUrl = CONFIG.getWebsocketUrl().replace('ws://localhost:8000/ws', `ws://localhost:8000/ws/${bookingCode}`);\n      const ws = new WebSocket(wsUrl);\n      \n      ws.onopen = () => {\n        console.log('ðŸ”Œ WebSocket connected for calls');\n      };\n      \n      ws.onmessage = (event) => {\n        const data = JSON.parse(event.data);\n        console.log('ðŸ“¨ WebSocket message received:', data);\n        \n        if (data.type === 'call_initiate' && data.from === 'passenger') {\n          // Incoming call from passenger\n          setCallState('ringing');\n          setStatusMessage('Incoming call from Passenger...');\n          \n          // Add call log to messages if provided\n          if (data.call_log) {\n            const callMessage: Message = {\n              id: `call_${Date.now()}`,\n              text: data.call_log.message,\n              sender: 'ai',\n              timestamp: data.call_log.timestamp,\n              type: 'call',\n              callDetails: {\n                duration: data.call_log.duration,\n                status: data.call_log.status\n              }\n            };\n            setMessages(prev => [...prev, callMessage]);\n          }\n        } else if (data.type === 'call_accept' && data.from === 'passenger') {\n          // Call accepted by passenger\n          setCallState('connected');\n          setStatusMessage('Call connected');\n          startCallTimer();\n          \n          // Add call log to messages if provided\n          if (data.call_log) {\n            const callMessage: Message = {\n              id: `call_${Date.now()}`,\n              text: data.call_log.message,\n              sender: 'ai',\n              timestamp: data.call_log.timestamp,\n              type: 'call',\n              callDetails: {\n                duration: data.call_log.duration,\n                status: data.call_log.status\n              }\n            };\n            setMessages(prev => [...prev, callMessage]);\n          }\n        } else if (data.type === 'call_reject' && data.from === 'passenger') {\n          // Call rejected by passenger\n          setCallState('ended');\n          setStatusMessage('Call rejected by Passenger');\n          \n          // Add call log to messages if provided\n          if (data.call_log) {\n            const callMessage: Message = {\n              id: `call_${Date.now()}`,\n              text: data.call_log.message,\n              sender: 'ai',\n              timestamp: data.call_log.timestamp,\n              type: 'call',\n              callDetails: {\n                duration: data.call_log.duration,\n                status: data.call_log.status\n              }\n            };\n            setMessages(prev => [...prev, callMessage]);\n          }\n          \n          setTimeout(() => setCallState('idle'), 2000);\n        } else if (data.type === 'call_end' && data.from === 'passenger') {\n          // Call ended by passenger\n          setCallState('ended');\n          if (timerRef.current) {\n            clearInterval(timerRef.current);\n            timerRef.current = null;\n          }\n          setStatusMessage('Call ended by Passenger');\n          \n          // Add call log to messages if provided\n          if (data.call_log) {\n            const callMessage: Message = {\n              id: `call_${Date.now()}`,\n              text: data.call_log.message,\n              sender: 'ai',\n              timestamp: data.call_log.timestamp,\n              type: 'call',\n              callDetails: {\n                duration: data.call_log.duration,\n                status: data.call_log.status\n              }\n            };\n            setMessages(prev => [...prev, callMessage]);\n          }\n          \n          setTimeout(() => {\n            setCallState('idle');\n            setCallDuration(0);\n          }, 2000);\n        }\n      };\n      \n      ws.onerror = (error) => {\n        console.error('WebSocket error:', error);\n      };\n      \n      ws.onclose = () => {\n        console.log('WebSocket disconnected');\n      };\n      \n      websocketRef.current = ws;\n      \n      return () => {\n        ws.close();\n      };\n    }\n  }, [isConnected, bookingCode]);\n\n  // Cleanup timers on unmount\n  useEffect(() => {\n    return () => {\n      if (timerRef.current) {\n        clearInterval(timerRef.current);\n        timerRef.current = null;\n      }\n    };\n  }, []);\n\n  // Connect to booking\n  const connectToBooking = async () => {\n    if (!(bookingCode || '').trim()) {\n      setStatusMessage('Please enter a booking code.');\n      return;\n    }\n\n    try {\n      setStatusMessage('Connecting to booking...');\n      \n      // Test connection by getting messages\n      const response = await axios.get(`${API_ENDPOINTS.GET_MESSAGES}/${bookingCode}`);\n      \n      if (response.data.success) {\n        setIsConnected(true);\n        setMessages(response.data.data.messages || []);\n        setStatusMessage('Connected successfully!');\n        \n        // Update connection ref\n        connectionRef.current = { isConnected: true, bookingCode: bookingCode };\n        \n        // Add welcome message\n        const welcomeMessage: Message = {\n          id: Date.now().toString(),\n          text: `Welcome to booking ${bookingCode}! How can I help you today?`,\n          sender: 'ai',\n          timestamp: new Date().toISOString(),\n          type: 'text'\n        };\n        setMessages(prev => [...prev, welcomeMessage]);\n      }\n    } catch (error) {\n      console.error('Connection error:', error);\n      setStatusMessage('Failed to connect. Please check your booking code.');\n    }\n  };\n\n  // Send message\n  const sendMessage = async () => {\n    console.log('Send message called with inputText:', inputText);\n    if (!(inputText || '').trim() || !isConnected) {\n      console.log('Send message blocked - inputText:', inputText, 'isConnected:', isConnected);\n      return;\n    }\n\n    const newMessage: Message = {\n      id: Date.now().toString(),\n      text: inputText,\n      sender: 'driver',\n      timestamp: new Date().toISOString(),\n      type: 'text'\n    };\n\n    console.log('Adding message to UI:', newMessage);\n    setMessages(prev => [...prev, newMessage]);\n    setInputText('');\n    setStatusMessage('Sending message...');\n\n    try {\n      const response = await axios.post(API_ENDPOINTS.SEND_MESSAGE, {\n        booking_code: bookingCode,\n        message: inputText,\n        sender: 'driver'\n      });\n\n      if (response.data.success) {\n        setStatusMessage('Message sent successfully!');\n        \n        // Add AI response\n        const aiResponse: Message = {\n          id: (Date.now() + 1).toString(),\n          text: 'Message sent successfully. The passenger will be notified.',\n          sender: 'ai',\n          timestamp: new Date().toISOString(),\n          type: 'text'\n        };\n        setMessages(prev => [...prev, aiResponse]);\n      }\n    } catch (error) {\n      console.error('Send message error:', error);\n      setStatusMessage('Failed to send message. Please try again.');\n    }\n  };\n\n  // Make call\n  const makeCall = async () => {\n    if (!isConnected) return;\n\n    setStatusMessage('Initiating call...');\n\n    try {\n      const response = await axios.post(API_ENDPOINTS.MAKE_CALL, {\n        booking_code: bookingCode,\n        call_type: 'voice',\n        duration: 0\n      });\n\n      if (response.data.success) {\n        const callMessage: Message = {\n          id: Date.now().toString(),\n          text: 'Call initiated successfully',\n          sender: 'ai',\n          timestamp: new Date().toISOString(),\n          type: 'call',\n          callDetails: {\n            duration: 0,\n            status: 'initiated'\n          }\n        };\n        setMessages(prev => [...prev, callMessage]);\n        setStatusMessage('Call initiated!');\n      }\n    } catch (error) {\n      console.error('Make call error:', error);\n      setStatusMessage('Failed to initiate call. Please try again.');\n    }\n  };\n\n  // Start voice recognition\n  const startListening = () => {\n    if (!isConnected || !bookingCode) {\n      setStatusMessage('Please connect to a booking first by entering the booking code.');\n      return;\n    }\n    \n    if (recognition && !isListening) {\n      recognition.start();\n    }\n  };\n\n  // Process voice command using AI agent\n  const processVoiceCommand = async (transcript: string) => {\n    console.log('ðŸ” DEBUG: processVoiceCommand called with:', transcript);\n    console.log('ðŸ” DEBUG: isConnected:', connectionRef.current.isConnected, 'bookingCode:', connectionRef.current.bookingCode);\n    \n    // Only process voice commands if already connected\n    if (!connectionRef.current.isConnected || !connectionRef.current.bookingCode) {\n      console.log('âŒ DEBUG: Not connected to booking');\n      setStatusMessage('Please connect to a booking first by entering the booking code.');\n      return;\n    }\n\n    // If connected, process with AI\n    await processVoiceCommandWithAI(transcript, connectionRef.current.bookingCode);\n  };\n\n  // Helper function to process voice command with AI\n  const processVoiceCommandWithAI = async (transcript: string, bookingCode: string) => {\n    try {\n      console.log('ðŸš€ DEBUG: Sending to AI agent endpoint:', API_ENDPOINTS.AI_AGENT);\n      console.log('ðŸ“¤ DEBUG: Request payload:', {\n        booking_code: bookingCode,\n        user_input: transcript,\n        user_type: 'driver'\n      });\n      \n      const response = await axios.post(API_ENDPOINTS.AI_AGENT, {\n        booking_code: bookingCode,\n        user_input: transcript,\n        user_type: 'driver'\n      });\n\n      console.log('ðŸ“¥ DEBUG: AI agent response:', response.data);\n\n      if (response.data.success) {\n        console.log('âœ… DEBUG: AI agent success');\n        console.log('ðŸ“ DEBUG: Original transcript:', transcript);\n        console.log('ðŸ“ DEBUG: Extracted message:', response.data.data.text);\n        \n        // Check if this is a call command\n        if (response.data.data.type === 'call') {\n          console.log('ðŸ“ž DEBUG: Call command detected');\n          handleCallCommand();\n        } else {\n          // Add AI response to chat\n          const aiMessage: Message = {\n            id: Date.now().toString(),\n            text: `AI processed: \"${transcript}\" â†’ \"${response.data.data.text}\"`,\n            sender: 'ai',\n            timestamp: new Date().toISOString(),\n            type: 'text'\n          };\n          \n          console.log('ðŸ’¬ DEBUG: Adding AI message to chat:', aiMessage);\n          setMessages(prev => [...prev, aiMessage]);\n          setStatusMessage('Voice command processed successfully!');\n        }\n      } else {\n        console.log('âŒ DEBUG: AI agent returned success: false');\n      }\n    } catch (error: any) {\n      console.error('ðŸ’¥ DEBUG: AI agent error:', error);\n      console.error('ðŸ’¥ DEBUG: Error details:', {\n        message: error.message,\n        response: error.response?.data,\n        status: error.response?.status\n      });\n      setStatusMessage('Failed to process voice command. Please try again.');\n    }\n  };\n\n  // Handle call command\n  const handleCallCommand = () => {\n    // Reset call state and duration\n    setCallState('calling');\n    setCallDuration(0);\n    setStatusMessage('Initiating call...');\n    \n    // Send call initiation via WebSocket\n    if (websocketRef.current && websocketRef.current.readyState === WebSocket.OPEN) {\n      websocketRef.current.send(JSON.stringify({\n        type: 'call_initiate',\n        from: 'driver',\n        booking_code: bookingCode\n      }));\n    }\n    \n    // Simulate call flow with delays\n    setTimeout(() => {\n      setCallState('ringing');\n      setStatusMessage('Calling passenger...');\n    }, 2000); // 2 second delay before ringing\n  };\n\n  // Start call timer\n  const startCallTimer = () => {\n    // Clear any existing timer\n    if (timerRef.current) {\n      clearInterval(timerRef.current);\n    }\n    \n    // Reset duration\n    setCallDuration(0);\n    \n    const interval = setInterval(() => {\n      setCallDuration(prev => prev + 1);\n    }, 1000);\n    \n    // Store interval ID for cleanup\n    timerRef.current = interval;\n    \n    return () => clearInterval(interval);\n  };\n\n  // End call\n  const endCall = () => {\n    // Clear timer\n    if (timerRef.current) {\n      clearInterval(timerRef.current);\n      timerRef.current = null;\n    }\n    \n    setCallState('ended');\n    setStatusMessage(`Call ended - Duration: ${callDuration} seconds`);\n    \n    // Send call end via WebSocket with duration\n    if (websocketRef.current && websocketRef.current.readyState === WebSocket.OPEN) {\n      websocketRef.current.send(JSON.stringify({\n        type: 'call_end',\n        from: 'driver',\n        booking_code: bookingCode,\n        duration: callDuration\n      }));\n    }\n    \n    setTimeout(() => {\n      setCallState('idle');\n      setCallDuration(0);\n    }, 2000);\n  };\n\n  // Accept call\n  const acceptCall = () => {\n    setCallState('connected');\n    setStatusMessage('Call accepted');\n    startCallTimer();\n    \n    // Send call acceptance via WebSocket\n    if (websocketRef.current && websocketRef.current.readyState === WebSocket.OPEN) {\n      websocketRef.current.send(JSON.stringify({\n        type: 'call_accept',\n        from: 'driver',\n        booking_code: bookingCode\n      }));\n    }\n  };\n\n  // Reject call\n  const rejectCall = () => {\n    setCallState('ended');\n    setStatusMessage('Call rejected');\n    \n    // Send call rejection via WebSocket\n    if (websocketRef.current && websocketRef.current.readyState === WebSocket.OPEN) {\n      websocketRef.current.send(JSON.stringify({\n        type: 'call_reject',\n        from: 'driver',\n        booking_code: bookingCode\n      }));\n    }\n    \n    setTimeout(() => {\n      setCallState('idle');\n      setCallDuration(0);\n    }, 2000);\n  };\n\n  // Handle key press\n  const handleKeyPress = (e: React.KeyboardEvent) => {\n    if (e.key === 'Enter' && !e.shiftKey) {\n      e.preventDefault();\n      sendMessage();\n    }\n  };\n\n  // Poll for new messages\n  useEffect(() => {\n    if (!isConnected || !bookingCode) return;\n\n    const pollInterval = setInterval(async () => {\n      try {\n        const response = await axios.get(`${API_ENDPOINTS.GET_MESSAGES}/${bookingCode}`);\n        if (response.data.success) {\n          const newMessages = response.data.data.messages || [];\n          setMessages(newMessages);\n        }\n      } catch (error) {\n        console.error('Polling error:', error);\n      }\n    }, 3000); // Poll every 3 seconds\n\n    return () => clearInterval(pollInterval);\n  }, [isConnected, bookingCode]);\n\n  return (\n    <AppContainer>\n      <Header>\n        <Title>DAX - Driver Assistant</Title>\n        <Subtitle>AI-powered chat and voice assistant</Subtitle>\n      </Header>\n\n      <MainContent>\n        {!isConnected ? (\n          <BookingCodeInput>\n            <Input\n              type=\"text\"\n              placeholder=\"Enter booking code...\"\n              value={bookingCode}\n              onChange={(e) => setBookingCode(e.target.value)}\n              onKeyPress={(e) => e.key === 'Enter' && connectToBooking()}\n            />\n            <Button\n              whileHover={{ scale: 1.05 }}\n              whileTap={{ scale: 0.95 }}\n              onClick={connectToBooking}\n            >\n              Connect\n            </Button>\n          </BookingCodeInput>\n        ) : (\n          <>\n            <ChatContainer ref={chatContainerRef}>\n              <AnimatePresence>\n                {messages.map((message) => (\n                  <MessageBubble\n                    key={message.id}\n                    $isOwn={message.sender === 'driver'}\n                    initial={{ opacity: 0, y: 20 }}\n                    animate={{ opacity: 1, y: 0 }}\n                    exit={{ opacity: 0, y: -20 }}\n                    transition={{ duration: 0.3 }}\n                  >\n                    {message.sender !== 'driver' && (\n                      <Avatar $type={message.sender}>\n                        {message.sender === 'passenger' ? <FaUser /> : <FaCar />}\n                      </Avatar>\n                    )}\n                    <div>\n                      <MessageContent $isOwn={message.sender === 'driver'}>\n                        {message.type === 'call' ? (\n                          <CallIndicator>\n                            <FaPhone />\n                            {message.text}\n                          </CallIndicator>\n                        ) : (\n                          message.text\n                        )}\n                      </MessageContent>\n                      <MessageTime>\n                        {new Date(message.timestamp).toLocaleTimeString()}\n                      </MessageTime>\n                    </div>\n                    {message.sender === 'driver' && (\n                      <Avatar $type={message.sender}>\n                        <FaCar />\n                      </Avatar>\n                    )}\n                  </MessageBubble>\n                ))}\n              </AnimatePresence>\n            </ChatContainer>\n\n            <InputContainer>\n              <TextInput\n                ref={inputRef}\n                type=\"text\"\n                placeholder=\"Type a message or use voice...\"\n                value={inputText || ''}\n                onChange={(e) => setInputText(e.target.value || '')}\n                onKeyPress={handleKeyPress}\n                disabled={!isConnected}\n              />\n              <VoiceButton\n                $isListening={isListening}\n                whileHover={{ scale: 1.05 }}\n                whileTap={{ scale: 0.95 }}\n                onClick={startListening}\n                disabled={!isConnected || isListening}\n              >\n                {isListening ? <FaMicrophoneSlash /> : <FaMicrophone />}\n              </VoiceButton>\n              <Button\n                whileHover={{ scale: 1.05 }}\n                whileTap={{ scale: 0.95 }}\n                onClick={sendMessage}\n                disabled={!(inputText || '').trim() || !isConnected}\n              >\n                <FaPaperPlane />\n              </Button>\n              <Button\n                whileHover={{ scale: 1.05 }}\n                whileTap={{ scale: 0.95 }}\n                onClick={makeCall}\n                disabled={!isConnected}\n              >\n                <FaPhone />\n              </Button>\n            </InputContainer>\n          </>\n        )}\n\n        {statusMessage && (\n          <StatusMessage>{statusMessage}</StatusMessage>\n        )}\n      </MainContent>\n\n      {/* Call Overlay */}\n      {callState !== 'idle' && (\n        <CallOverlay\n          initial={{ opacity: 0 }}\n          animate={{ opacity: 1 }}\n          exit={{ opacity: 0 }}\n        >\n          <CallCard>\n            <CallStatus $status={callState}>\n              {callState === 'calling' && 'Calling...'}\n              {callState === 'ringing' && 'Ringing...'}\n              {callState === 'connected' && 'Connected'}\n              {callState === 'ended' && 'Call Ended'}\n            </CallStatus>\n            \n            {callState === 'connected' && (\n              <CallDuration>\n                {Math.floor(callDuration / 60)}:{(callDuration % 60).toString().padStart(2, '0')}\n              </CallDuration>\n            )}\n            \n            <CallButtons>\n              {callState === 'ringing' && (\n                <>\n                  <CallButton $type=\"accept\" onClick={acceptCall}>\n                    <FaPhone />\n                  </CallButton>\n                  <CallButton $type=\"reject\" onClick={rejectCall}>\n                    <FaMicrophoneSlash />\n                  </CallButton>\n                </>\n              )}\n              {callState === 'connected' && (\n                <CallButton $type=\"end\" onClick={endCall}>\n                  <FaMicrophoneSlash />\n                </CallButton>\n              )}\n            </CallButtons>\n          </CallCard>\n        </CallOverlay>\n      )}\n    </AppContainer>\n  );\n};\n\nexport default App; "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}